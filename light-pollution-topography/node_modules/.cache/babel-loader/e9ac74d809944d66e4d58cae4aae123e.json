{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction noop() {}\n\nvar DEFAULT_SETTINGS = {\n  onStart: noop,\n  onUpdate: noop,\n  onInterrupt: noop,\n  onEnd: noop\n};\n\nvar Transition = function () {\n  function Transition(timeline) {\n    _classCallCheck(this, Transition);\n\n    this._inProgress = false;\n    this._handle = null;\n    this.timeline = timeline;\n    this.settings = {};\n  }\n\n  _createClass(Transition, [{\n    key: \"start\",\n    value: function start(props) {\n      this.cancel();\n      this.settings = Object.assign({}, DEFAULT_SETTINGS, props);\n      this._inProgress = true;\n      var timeline = this.timeline,\n          settings = this.settings;\n      this._handle = timeline.addChannel({\n        delay: timeline.getTime(),\n        duration: settings.duration\n      });\n      settings.onStart(this);\n    }\n  }, {\n    key: \"end\",\n    value: function end() {\n      if (this._inProgress) {\n        this.timeline.removeChannel(this._handle);\n        this._handle = null;\n        this._inProgress = false;\n        this.settings.onEnd(this);\n      }\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      if (this._inProgress) {\n        this.settings.onInterrupt(this);\n        this.timeline.removeChannel(this._handle);\n        this._handle = null;\n        this._inProgress = false;\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      if (!this._inProgress) {\n        return false;\n      }\n\n      this.time = this.timeline.getTime(this._handle);\n\n      this._onUpdate();\n\n      this.settings.onUpdate(this);\n\n      if (this.timeline.isFinished(this._handle)) {\n        this.end();\n      }\n\n      return true;\n    }\n  }, {\n    key: \"_onUpdate\",\n    value: function _onUpdate() {}\n  }, {\n    key: \"inProgress\",\n    get: function get() {\n      return this._inProgress;\n    }\n  }]);\n\n  return Transition;\n}();\n\nexport { Transition as default };","map":{"version":3,"sources":["../../../src/transitions/transition.js"],"names":["DEFAULT_SETTINGS","onStart","onUpdate","onInterrupt","onEnd","noop","Transition","props","Object","timeline","settings","delay","duration"],"mappings":";;;AAAA,SAAA,IAAA,GAAgB,CAAE;;AAElB,IAAMA,gBAAgB,GAAG;AACvBC,EAAAA,OAAO,EADgB,IAAA;AAEvBC,EAAAA,QAAQ,EAFe,IAAA;AAGvBC,EAAAA,WAAW,EAHY,IAAA;AAIvBC,EAAAA,KAAK,EAAEC;AAJgB,CAAzB;;IAOqBC,U;AAInB,WAAA,UAAA,CAAA,QAAA,EAAsB;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,UAAA,CAAA;;AACpB,SAAA,WAAA,GAAA,KAAA;AACA,SAAA,OAAA,GAAA,IAAA;AACA,SAAA,QAAA,GAAA,QAAA;AAGA,SAAA,QAAA,GAAA,EAAA;AACD;;;;0BAWKC,K,EAAO;AACX,WAAA,MAAA;AACA,WAAA,QAAA,GAAgBC,MAAM,CAANA,MAAAA,CAAAA,EAAAA,EAAAA,gBAAAA,EAAhB,KAAgBA,CAAhB;AACA,WAAA,WAAA,GAAA,IAAA;AAHW,UAKJC,QALI,GAAA,KAAA,QAAA;AAAA,UAKMC,QALN,GAAA,KAAA,QAAA;AAMX,WAAA,OAAA,GAAe,QAAQ,CAAR,UAAA,CAAoB;AACjCC,QAAAA,KAAK,EAAEF,QAAQ,CADkB,OAC1BA,EAD0B;AAEjCG,QAAAA,QAAQ,EAAEF,QAAQ,CAACE;AAFc,OAApB,CAAf;AAIAF,MAAAA,QAAQ,CAARA,OAAAA,CAAAA,IAAAA;AACD;;;0BAKK;AACJ,UAAI,KAAJ,WAAA,EAAsB;AACpB,aAAA,QAAA,CAAA,aAAA,CAA4B,KAA5B,OAAA;AACA,aAAA,OAAA,GAAA,IAAA;AACA,aAAA,WAAA,GAAA,KAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,IAAA;AACD;AACF;;;6BAKQ;AACP,UAAI,KAAJ,WAAA,EAAsB;AACpB,aAAA,QAAA,CAAA,WAAA,CAAA,IAAA;AACA,aAAA,QAAA,CAAA,aAAA,CAA4B,KAA5B,OAAA;AACA,aAAA,OAAA,GAAA,IAAA;AACA,aAAA,WAAA,GAAA,KAAA;AACD;AACF;;;6BAKQ;AACP,UAAI,CAAC,KAAL,WAAA,EAAuB;AACrB,eAAA,KAAA;AACD;;AAED,WAAA,IAAA,GAAY,KAAA,QAAA,CAAA,OAAA,CAAsB,KAAlC,OAAY,CAAZ;;AAEA,WAAA,SAAA;;AAEA,WAAA,QAAA,CAAA,QAAA,CAAA,IAAA;;AAIA,UAAI,KAAA,QAAA,CAAA,UAAA,CAAyB,KAA7B,OAAI,CAAJ,EAA4C;AAC1C,aAAA,GAAA;AACD;;AACD,aAAA,IAAA;AACD;;;gCAIW,CAEX;;;wBAvEgB;AACf,aAAO,KAAP,WAAA;AACD;;;;;;SAhBkBJ,U","sourcesContent":["function noop() {}\n\nconst DEFAULT_SETTINGS = {\n  onStart: noop,\n  onUpdate: noop,\n  onInterrupt: noop,\n  onEnd: noop\n};\n\nexport default class Transition {\n  /**\n   * @params timeline {Timeline}\n   */\n  constructor(timeline) {\n    this._inProgress = false;\n    this._handle = null;\n    this.timeline = timeline;\n\n    // Defaults\n    this.settings = {};\n  }\n\n  /* Public API */\n  get inProgress() {\n    return this._inProgress;\n  }\n\n  /**\n   * (re)start this transition.\n   * @params props {object} - optional overriding props. see constructor\n   */\n  start(props) {\n    this.cancel();\n    this.settings = Object.assign({}, DEFAULT_SETTINGS, props);\n    this._inProgress = true;\n\n    const {timeline, settings} = this;\n    this._handle = timeline.addChannel({\n      delay: timeline.getTime(),\n      duration: settings.duration\n    });\n    settings.onStart(this);\n  }\n\n  /**\n   * end this transition if it is in progress.\n   */\n  end() {\n    if (this._inProgress) {\n      this.timeline.removeChannel(this._handle);\n      this._handle = null;\n      this._inProgress = false;\n      this.settings.onEnd(this);\n    }\n  }\n\n  /**\n   * cancel this transition if it is in progress.\n   */\n  cancel() {\n    if (this._inProgress) {\n      this.settings.onInterrupt(this);\n      this.timeline.removeChannel(this._handle);\n      this._handle = null;\n      this._inProgress = false;\n    }\n  }\n\n  /**\n   * update this transition. Returns `true` if updated.\n   */\n  update() {\n    if (!this._inProgress) {\n      return false;\n    }\n\n    this.time = this.timeline.getTime(this._handle);\n    // Call subclass method\n    this._onUpdate();\n    // Call user callback\n    this.settings.onUpdate(this);\n\n    // This only works if `settings.duration` is set\n    // Spring transition must call `end` manually\n    if (this.timeline.isFinished(this._handle)) {\n      this.end();\n    }\n    return true;\n  }\n\n  /* Private API */\n\n  _onUpdate() {\n    // for subclass override\n  }\n}\n"]},"metadata":{},"sourceType":"module"}