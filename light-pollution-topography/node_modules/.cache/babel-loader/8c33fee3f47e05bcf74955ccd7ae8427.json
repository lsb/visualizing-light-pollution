{"ast":null,"code":"'use strict';\n\nvar VectorTileFeature = require('./vectortilefeature.js');\n\nmodule.exports = VectorTileLayer;\n\nfunction VectorTileLayer(pbf, end) {\n  // Public\n  this.version = 1;\n  this.name = null;\n  this.extent = 4096;\n  this.length = 0; // Private\n\n  this._pbf = pbf;\n  this._keys = [];\n  this._values = [];\n  this._features = [];\n  pbf.readFields(readLayer, this, end);\n  this.length = this._features.length;\n}\n\nfunction readLayer(tag, layer, pbf) {\n  if (tag === 15) layer.version = pbf.readVarint();else if (tag === 1) layer.name = pbf.readString();else if (tag === 5) layer.extent = pbf.readVarint();else if (tag === 2) layer._features.push(pbf.pos);else if (tag === 3) layer._keys.push(pbf.readString());else if (tag === 4) layer._values.push(readValueMessage(pbf));\n}\n\nfunction readValueMessage(pbf) {\n  var value = null,\n      end = pbf.readVarint() + pbf.pos;\n\n  while (pbf.pos < end) {\n    var tag = pbf.readVarint() >> 3;\n    value = tag === 1 ? pbf.readString() : tag === 2 ? pbf.readFloat() : tag === 3 ? pbf.readDouble() : tag === 4 ? pbf.readVarint64() : tag === 5 ? pbf.readVarint() : tag === 6 ? pbf.readSVarint() : tag === 7 ? pbf.readBoolean() : null;\n  }\n\n  return value;\n} // return feature `i` from this layer as a `VectorTileFeature`\n\n\nVectorTileLayer.prototype.feature = function (i) {\n  if (i < 0 || i >= this._features.length) throw new Error('feature index out of bounds');\n  this._pbf.pos = this._features[i];\n\n  var end = this._pbf.readVarint() + this._pbf.pos;\n\n  return new VectorTileFeature(this._pbf, end, this.extent, this._keys, this._values);\n};","map":{"version":3,"sources":["/dev/shm/wikidatageo/light-pollution-topography/node_modules/@mapbox/vector-tile/lib/vectortilelayer.js"],"names":["VectorTileFeature","require","module","exports","VectorTileLayer","pbf","end","version","name","extent","length","_pbf","_keys","_values","_features","readFields","readLayer","tag","layer","readVarint","readString","push","pos","readValueMessage","value","readFloat","readDouble","readVarint64","readSVarint","readBoolean","prototype","feature","i","Error"],"mappings":"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","sourcesContent":["'use strict';\n\nvar VectorTileFeature = require('./vectortilefeature.js');\n\nmodule.exports = VectorTileLayer;\n\nfunction VectorTileLayer(pbf, end) {\n    // Public\n    this.version = 1;\n    this.name = null;\n    this.extent = 4096;\n    this.length = 0;\n\n    // Private\n    this._pbf = pbf;\n    this._keys = [];\n    this._values = [];\n    this._features = [];\n\n    pbf.readFields(readLayer, this, end);\n\n    this.length = this._features.length;\n}\n\nfunction readLayer(tag, layer, pbf) {\n    if (tag === 15) layer.version = pbf.readVarint();\n    else if (tag === 1) layer.name = pbf.readString();\n    else if (tag === 5) layer.extent = pbf.readVarint();\n    else if (tag === 2) layer._features.push(pbf.pos);\n    else if (tag === 3) layer._keys.push(pbf.readString());\n    else if (tag === 4) layer._values.push(readValueMessage(pbf));\n}\n\nfunction readValueMessage(pbf) {\n    var value = null,\n        end = pbf.readVarint() + pbf.pos;\n\n    while (pbf.pos < end) {\n        var tag = pbf.readVarint() >> 3;\n\n        value = tag === 1 ? pbf.readString() :\n            tag === 2 ? pbf.readFloat() :\n            tag === 3 ? pbf.readDouble() :\n            tag === 4 ? pbf.readVarint64() :\n            tag === 5 ? pbf.readVarint() :\n            tag === 6 ? pbf.readSVarint() :\n            tag === 7 ? pbf.readBoolean() : null;\n    }\n\n    return value;\n}\n\n// return feature `i` from this layer as a `VectorTileFeature`\nVectorTileLayer.prototype.feature = function(i) {\n    if (i < 0 || i >= this._features.length) throw new Error('feature index out of bounds');\n\n    this._pbf.pos = this._features[i];\n\n    var end = this._pbf.readVarint() + this._pbf.pos;\n    return new VectorTileFeature(this._pbf, end, this.extent, this._keys, this._values);\n};\n"]},"metadata":{},"sourceType":"script"}