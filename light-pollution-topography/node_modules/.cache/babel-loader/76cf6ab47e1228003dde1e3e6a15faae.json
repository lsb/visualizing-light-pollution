{"ast":null,"code":"export function fp64ify(a) {\n  var out = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var startIndex = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  var hiPart = Math.fround(a);\n  var loPart = a - hiPart;\n  out[startIndex] = hiPart;\n  out[startIndex + 1] = loPart;\n  return out;\n}\nexport function fp64LowPart(a) {\n  return a - Math.fround(a);\n}\nexport function fp64ifyMatrix4(matrix) {\n  var matrixFP64 = new Float32Array(32);\n\n  for (var i = 0; i < 4; ++i) {\n    for (var j = 0; j < 4; ++j) {\n      var index = i * 4 + j;\n      fp64ify(matrix[j * 4 + i], matrixFP64, index * 2);\n    }\n  }\n\n  return matrixFP64;\n}","map":{"version":3,"sources":["../../../../src/modules/fp64/fp64-utils.js"],"names":["out","startIndex","hiPart","Math","loPart","a","matrixFP64","i","j","index","fp64ify","matrix"],"mappings":"AAOA,OAAO,SAAA,OAAA,CAAA,CAAA,EAA8C;AAAA,MAA1BA,GAA0B,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAApB,EAAoB;AAAA,MAAhBC,UAAgB,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAH,CAAG;AACnD,MAAMC,MAAM,GAAGC,IAAI,CAAJA,MAAAA,CAAf,CAAeA,CAAf;AACA,MAAMC,MAAM,GAAGC,CAAC,GAAhB,MAAA;AACAL,EAAAA,GAAG,CAAHA,UAAG,CAAHA,GAAAA,MAAAA;AACAA,EAAAA,GAAG,CAACC,UAAU,GAAdD,CAAG,CAAHA,GAAAA,MAAAA;AACA,SAAA,GAAA;AACD;AAOD,OAAO,SAAA,WAAA,CAAA,CAAA,EAAwB;AAC7B,SAAOK,CAAC,GAAGF,IAAI,CAAJA,MAAAA,CAAX,CAAWA,CAAX;AACD;AAOD,OAAO,SAAA,cAAA,CAAA,MAAA,EAAgC;AAErC,MAAMG,UAAU,GAAG,IAAA,YAAA,CAAnB,EAAmB,CAAnB;;AACA,OAAK,IAAIC,CAAC,GAAV,CAAA,EAAgBA,CAAC,GAAjB,CAAA,EAAuB,EAAvB,CAAA,EAA4B;AAC1B,SAAK,IAAIC,CAAC,GAAV,CAAA,EAAgBA,CAAC,GAAjB,CAAA,EAAuB,EAAvB,CAAA,EAA4B;AAC1B,UAAMC,KAAK,GAAGF,CAAC,GAADA,CAAAA,GAAd,CAAA;AACAG,MAAAA,OAAO,CAACC,MAAM,CAACH,CAAC,GAADA,CAAAA,GAAR,CAAO,CAAP,EAAA,UAAA,EAAgCC,KAAK,GAA5CC,CAAO,CAAPA;AACD;AACF;;AACD,SAAA,UAAA;AACD","sourcesContent":["/**\n * Calculate WebGL 64 bit float\n * @param a {number} - the input float number\n * @param out {array, optional} - the output array. If not supplied, a new array is created.\n * @param startIndex {integer, optional} - the index in the output array to fill from. Default 0.\n * @returns {array} - the fp64 representation of the input number\n */\nexport function fp64ify(a, out = [], startIndex = 0) {\n  const hiPart = Math.fround(a);\n  const loPart = a - hiPart;\n  out[startIndex] = hiPart;\n  out[startIndex + 1] = loPart;\n  return out;\n}\n\n/**\n * Calculate the low part of a WebGL 64 bit float\n * @param a {number} - the input float number\n * @returns {number} - the lower 32 bit of the number\n */\nexport function fp64LowPart(a) {\n  return a - Math.fround(a);\n}\n\n/**\n * Calculate WebGL 64 bit matrix (transposed \"Float64Array\")\n * @param matrix {Matrix4} - the input matrix\n * @returns {array} - the fp64 representation of the input matrix\n */\nexport function fp64ifyMatrix4(matrix) {\n  // Transpose the projection matrix to column major for GLSL.\n  const matrixFP64 = new Float32Array(32);\n  for (let i = 0; i < 4; ++i) {\n    for (let j = 0; j < 4; ++j) {\n      const index = i * 4 + j;\n      fp64ify(matrix[j * 4 + i], matrixFP64, index * 2);\n    }\n  }\n  return matrixFP64;\n}\n"]},"metadata":{},"sourceType":"module"}