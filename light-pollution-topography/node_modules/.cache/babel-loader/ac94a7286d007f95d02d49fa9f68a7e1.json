{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _FEATURES$WEBGL2$FEAT;\n\nimport Framebuffer from '../classes/framebuffer';\nimport Texture2D from '../classes/texture-2d';\nexport var FEATURES = {\n  WEBGL2: 'WEBGL2',\n  VERTEX_ARRAY_OBJECT: 'VERTEX_ARRAY_OBJECT',\n  TIMER_QUERY: 'TIMER_QUERY',\n  INSTANCED_RENDERING: 'INSTANCED_RENDERING',\n  MULTIPLE_RENDER_TARGETS: 'MULTIPLE_RENDER_TARGETS',\n  ELEMENT_INDEX_UINT32: 'ELEMENT_INDEX_UINT32',\n  BLEND_EQUATION_MINMAX: 'BLEND_EQUATION_MINMAX',\n  FLOAT_BLEND: 'FLOAT_BLEND',\n  COLOR_ENCODING_SRGB: 'COLOR_ENCODING_SRGB',\n  TEXTURE_DEPTH: 'TEXTURE_DEPTH',\n  TEXTURE_FLOAT: 'TEXTURE_FLOAT',\n  TEXTURE_HALF_FLOAT: 'TEXTURE_HALF_FLOAT',\n  TEXTURE_FILTER_LINEAR_FLOAT: 'TEXTURE_FILTER_LINEAR_FLOAT',\n  TEXTURE_FILTER_LINEAR_HALF_FLOAT: 'TEXTURE_FILTER_LINEAR_HALF_FLOAT',\n  TEXTURE_FILTER_ANISOTROPIC: 'TEXTURE_FILTER_ANISOTROPIC',\n  COLOR_ATTACHMENT_RGBA32F: 'COLOR_ATTACHMENT_RGBA32F',\n  COLOR_ATTACHMENT_FLOAT: 'COLOR_ATTACHMENT_FLOAT',\n  COLOR_ATTACHMENT_HALF_FLOAT: 'COLOR_ATTACHMENT_HALF_FLOAT',\n  GLSL_FRAG_DATA: 'GLSL_FRAG_DATA',\n  GLSL_FRAG_DEPTH: 'GLSL_FRAG_DEPTH',\n  GLSL_DERIVATIVES: 'GLSL_DERIVATIVES',\n  GLSL_TEXTURE_LOD: 'GLSL_TEXTURE_LOD'\n};\n\nfunction checkFloat32ColorAttachment(gl) {\n  var testTexture = new Texture2D(gl, {\n    format: 6408,\n    type: 5126,\n    dataFormat: 6408\n  });\n  var testFb = new Framebuffer(gl, {\n    id: \"test-framebuffer\",\n    check: false,\n    attachments: _defineProperty({}, 36064, testTexture)\n  });\n  var status = testFb.getStatus();\n  testTexture[\"delete\"]();\n  testFb[\"delete\"]();\n  return status === 36053;\n}\n\nexport default (_FEATURES$WEBGL2$FEAT = {}, _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.WEBGL2, [false, true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.VERTEX_ARRAY_OBJECT, ['OES_vertex_array_object', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.TIMER_QUERY, ['EXT_disjoint_timer_query', 'EXT_disjoint_timer_query_webgl2']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.INSTANCED_RENDERING, ['ANGLE_instanced_arrays', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.MULTIPLE_RENDER_TARGETS, ['WEBGL_draw_buffers', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.ELEMENT_INDEX_UINT32, ['OES_element_index_uint', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.BLEND_EQUATION_MINMAX, ['EXT_blend_minmax', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.FLOAT_BLEND, ['EXT_float_blend']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.COLOR_ENCODING_SRGB, ['EXT_sRGB', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.TEXTURE_DEPTH, ['WEBGL_depth_texture', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.TEXTURE_FLOAT, ['OES_texture_float', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.TEXTURE_HALF_FLOAT, ['OES_texture_half_float', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.TEXTURE_FILTER_LINEAR_FLOAT, ['OES_texture_float_linear']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.TEXTURE_FILTER_LINEAR_HALF_FLOAT, ['OES_texture_half_float_linear']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.TEXTURE_FILTER_ANISOTROPIC, ['EXT_texture_filter_anisotropic']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.COLOR_ATTACHMENT_RGBA32F, [checkFloat32ColorAttachment, 'EXT_color_buffer_float']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.COLOR_ATTACHMENT_FLOAT, [false, 'EXT_color_buffer_float']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.COLOR_ATTACHMENT_HALF_FLOAT, ['EXT_color_buffer_half_float']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.GLSL_FRAG_DATA, ['WEBGL_draw_buffers', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.GLSL_FRAG_DEPTH, ['EXT_frag_depth', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.GLSL_DERIVATIVES, ['OES_standard_derivatives', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.GLSL_TEXTURE_LOD, ['EXT_shader_texture_lod', true]), _FEATURES$WEBGL2$FEAT);","map":{"version":3,"sources":["../../../src/features/webgl-features-table.js"],"names":["FEATURES","WEBGL2","VERTEX_ARRAY_OBJECT","TIMER_QUERY","INSTANCED_RENDERING","MULTIPLE_RENDER_TARGETS","ELEMENT_INDEX_UINT32","BLEND_EQUATION_MINMAX","FLOAT_BLEND","COLOR_ENCODING_SRGB","TEXTURE_DEPTH","TEXTURE_FLOAT","TEXTURE_HALF_FLOAT","TEXTURE_FILTER_LINEAR_FLOAT","TEXTURE_FILTER_LINEAR_HALF_FLOAT","TEXTURE_FILTER_ANISOTROPIC","COLOR_ATTACHMENT_RGBA32F","COLOR_ATTACHMENT_FLOAT","COLOR_ATTACHMENT_HALF_FLOAT","GLSL_FRAG_DATA","GLSL_FRAG_DEPTH","GLSL_DERIVATIVES","GLSL_TEXTURE_LOD","testTexture","format","type","dataFormat","testFb","id","check","attachments","status"],"mappings":"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","sourcesContent":["import Framebuffer from '../classes/framebuffer';\nimport Texture2D from '../classes/texture-2d';\n// TODO - this should be the default export, test cases need updating\nexport const FEATURES = {\n  WEBGL2: 'WEBGL2',\n\n  // API SUPPORT\n  VERTEX_ARRAY_OBJECT: 'VERTEX_ARRAY_OBJECT',\n  TIMER_QUERY: 'TIMER_QUERY',\n  INSTANCED_RENDERING: 'INSTANCED_RENDERING',\n  MULTIPLE_RENDER_TARGETS: 'MULTIPLE_RENDER_TARGETS',\n\n  // FEATURES\n  ELEMENT_INDEX_UINT32: 'ELEMENT_INDEX_UINT32',\n\n  // BLENDING\n  BLEND_EQUATION_MINMAX: 'BLEND_EQUATION_MINMAX',\n  FLOAT_BLEND: 'FLOAT_BLEND',\n\n  // TEXTURES: '// TEXTURES', RENDERBUFFERS\n  COLOR_ENCODING_SRGB: 'COLOR_ENCODING_SRGB',\n\n  // TEXTURES\n  TEXTURE_DEPTH: 'TEXTURE_DEPTH',\n  TEXTURE_FLOAT: 'TEXTURE_FLOAT',\n  TEXTURE_HALF_FLOAT: 'TEXTURE_HALF_FLOAT',\n\n  TEXTURE_FILTER_LINEAR_FLOAT: 'TEXTURE_FILTER_LINEAR_FLOAT',\n  TEXTURE_FILTER_LINEAR_HALF_FLOAT: 'TEXTURE_FILTER_LINEAR_HALF_FLOAT',\n  TEXTURE_FILTER_ANISOTROPIC: 'TEXTURE_FILTER_ANISOTROPIC',\n\n  // FRAMEBUFFERS: '// FRAMEBUFFERS', TEXTURES AND RENDERBUFFERS\n  COLOR_ATTACHMENT_RGBA32F: 'COLOR_ATTACHMENT_RGBA32F',\n  COLOR_ATTACHMENT_FLOAT: 'COLOR_ATTACHMENT_FLOAT',\n  COLOR_ATTACHMENT_HALF_FLOAT: 'COLOR_ATTACHMENT_HALF_FLOAT',\n\n  // GLSL extensions\n  GLSL_FRAG_DATA: 'GLSL_FRAG_DATA',\n  GLSL_FRAG_DEPTH: 'GLSL_FRAG_DEPTH',\n  GLSL_DERIVATIVES: 'GLSL_DERIVATIVES',\n  GLSL_TEXTURE_LOD: 'GLSL_TEXTURE_LOD'\n};\n\n// function to test if Float 32 bit format texture can be bound as color attachment\nfunction checkFloat32ColorAttachment(gl) {\n  const testTexture = new Texture2D(gl, {\n    format: gl.RGBA,\n    type: gl.FLOAT,\n    dataFormat: gl.RGBA\n  });\n  const testFb = new Framebuffer(gl, {\n    id: `test-framebuffer`,\n    check: false,\n    attachments: {\n      [gl.COLOR_ATTACHMENT0]: testTexture\n    }\n  });\n  const status = testFb.getStatus();\n  testTexture.delete();\n  testFb.delete();\n  return status === gl.FRAMEBUFFER_COMPLETE;\n}\n\n// Defines luma.gl \"feature\" names and semantics\n// Format: 'feature-name: [WebGL1 support, WebGL2 support] / [WebGL1 and WebGL2 support]', when support is 'string' it is the name of the extension\nexport default {\n  [FEATURES.WEBGL2]: [false, true],\n\n  // API SUPPORT\n  [FEATURES.VERTEX_ARRAY_OBJECT]: ['OES_vertex_array_object', true],\n  [FEATURES.TIMER_QUERY]: ['EXT_disjoint_timer_query', 'EXT_disjoint_timer_query_webgl2'],\n  [FEATURES.INSTANCED_RENDERING]: ['ANGLE_instanced_arrays', true],\n  [FEATURES.MULTIPLE_RENDER_TARGETS]: ['WEBGL_draw_buffers', true],\n\n  // FEATURES\n  [FEATURES.ELEMENT_INDEX_UINT32]: ['OES_element_index_uint', true],\n\n  // BLENDING\n  [FEATURES.BLEND_EQUATION_MINMAX]: ['EXT_blend_minmax', true],\n  [FEATURES.FLOAT_BLEND]: ['EXT_float_blend'],\n\n  // TEXTURES, RENDERBUFFERS\n  [FEATURES.COLOR_ENCODING_SRGB]: ['EXT_sRGB', true],\n\n  // TEXTURES\n  [FEATURES.TEXTURE_DEPTH]: ['WEBGL_depth_texture', true],\n  [FEATURES.TEXTURE_FLOAT]: ['OES_texture_float', true],\n  [FEATURES.TEXTURE_HALF_FLOAT]: ['OES_texture_half_float', true],\n\n  [FEATURES.TEXTURE_FILTER_LINEAR_FLOAT]: ['OES_texture_float_linear'],\n  [FEATURES.TEXTURE_FILTER_LINEAR_HALF_FLOAT]: ['OES_texture_half_float_linear'],\n  [FEATURES.TEXTURE_FILTER_ANISOTROPIC]: ['EXT_texture_filter_anisotropic'],\n\n  // FRAMEBUFFERS, TEXTURES AND RENDERBUFFERS\n  [FEATURES.COLOR_ATTACHMENT_RGBA32F]: [checkFloat32ColorAttachment, 'EXT_color_buffer_float'],\n  [FEATURES.COLOR_ATTACHMENT_FLOAT]: [false, 'EXT_color_buffer_float'],\n  [FEATURES.COLOR_ATTACHMENT_HALF_FLOAT]: ['EXT_color_buffer_half_float'],\n\n  // GLSL extensions\n  [FEATURES.GLSL_FRAG_DATA]: ['WEBGL_draw_buffers', true],\n  [FEATURES.GLSL_FRAG_DEPTH]: ['EXT_frag_depth', true],\n  [FEATURES.GLSL_DERIVATIVES]: ['OES_standard_derivatives', true],\n  [FEATURES.GLSL_TEXTURE_LOD]: ['EXT_shader_texture_lod', true]\n};\n"]},"metadata":{},"sourceType":"module"}