{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { log } from '@luma.gl/gltools';\nimport { Stats } from 'probe.gl';\nimport { isBrowser, global } from 'probe.gl/env';\nvar VERSION = typeof \"8.1.0\" !== 'undefined' ? \"8.1.0\" : 'untranspiled source';\nvar STARTUP_MESSAGE = 'set luma.log.level=1 (or higher) to trace rendering';\n\nvar StatsManager = function () {\n  function StatsManager() {\n    _classCallCheck(this, StatsManager);\n\n    this.stats = new Map();\n  }\n\n  _createClass(StatsManager, [{\n    key: \"get\",\n    value: function get(name) {\n      if (!this.stats.has(name)) {\n        this.stats.set(name, new Stats({\n          id: name\n        }));\n      }\n\n      return this.stats.get(name);\n    }\n  }]);\n\n  return StatsManager;\n}();\n\nvar lumaStats = new StatsManager();\n\nif (global.luma && global.luma.VERSION !== VERSION) {\n  throw new Error(\"luma.gl - multiple VERSIONs detected: \".concat(global.luma.VERSION, \" vs \").concat(VERSION));\n}\n\nif (!global.luma) {\n  if (isBrowser()) {\n    log.log(1, \"luma.gl \".concat(VERSION, \" - \").concat(STARTUP_MESSAGE))();\n  }\n\n  global.luma = global.luma || {\n    VERSION: VERSION,\n    version: VERSION,\n    log: log,\n    stats: lumaStats,\n    globals: {\n      modules: {},\n      nodeIO: {}\n    }\n  };\n}\n\nexport { lumaStats };\nexport default global.luma;","map":{"version":3,"sources":["../../src/init.js"],"names":["VERSION","STARTUP_MESSAGE","StatsManager","name","id","lumaStats","global","isBrowser","log","version","stats","globals","modules","nodeIO"],"mappings":";;AAAA,SAAA,GAAA,QAAA,kBAAA;AACA,SAAA,KAAA,QAAA,UAAA;AACA,SAAA,SAAA,EAAA,MAAA,QAAA,cAAA;AAIA,IAAMA,OAAO,GAAG,OAAA,OAAA,KAAA,WAAA,GAAA,OAAA,GAAhB,qBAAA;AAEA,IAAMC,eAAe,GAArB,qDAAA;;IAKMC,Y;AACJ,WAAA,YAAA,GAAc;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,YAAA,CAAA;;AACZ,SAAA,KAAA,GAAa,IAAb,GAAa,EAAb;AACD;;;;wBAEGC,I,EAAM;AACR,UAAI,CAAC,KAAA,KAAA,CAAA,GAAA,CAAL,IAAK,CAAL,EAA2B;AACzB,aAAA,KAAA,CAAA,GAAA,CAAA,IAAA,EAAqB,IAAA,KAAA,CAAU;AAACC,UAAAA,EAAE,EAAED;AAAL,SAAV,CAArB;AACD;;AAED,aAAO,KAAA,KAAA,CAAA,GAAA,CAAP,IAAO,CAAP;AACD;;;;;;AAGH,IAAME,SAAS,GAAG,IAAlB,YAAkB,EAAlB;;AAEA,IAAIC,MAAM,CAANA,IAAAA,IAAeA,MAAM,CAANA,IAAAA,CAAAA,OAAAA,KAAnB,OAAA,EAAoD;AAClD,QAAM,IAAA,KAAA,CAAA,yCAAA,MAAA,CAAmDA,MAAM,CAANA,IAAAA,CAAnD,OAAA,EAAA,MAAA,EAAA,MAAA,CAAN,OAAM,CAAA,CAAN;AACD;;AAED,IAAI,CAACA,MAAM,CAAX,IAAA,EAAkB;AAChB,MAAIC,SAAJ,EAAA,EAAiB;AACfC,IAAAA,GAAG,CAAHA,GAAAA,CAAAA,CAAAA,EAAAA,WAAAA,MAAAA,CAAAA,OAAAA,EAAAA,KAAAA,EAAAA,MAAAA,CAAAA,eAAAA,CAAAA;AACD;;AAEDF,EAAAA,MAAM,CAANA,IAAAA,GAAcA,MAAM,CAANA,IAAAA,IAAe;AAC3BN,IAAAA,OAAO,EADoB,OAAA;AAE3BS,IAAAA,OAAO,EAFoB,OAAA;AAG3BD,IAAAA,GAAG,EAHwB,GAAA;AAO3BE,IAAAA,KAAK,EAPsB,SAAA;AAc3BC,IAAAA,OAAO,EAAE;AACPC,MAAAA,OAAO,EADA,EAAA;AAEPC,MAAAA,MAAM,EAAE;AAFD;AAdkB,GAA7BP;AAmBD;;AAED,SAAA,SAAA;AACA,eAAeA,MAAM,CAArB,IAAA","sourcesContent":["import {log} from '@luma.gl/gltools';\nimport {Stats} from 'probe.gl';\nimport {isBrowser, global} from 'probe.gl/env';\n\n// Version detection using babel plugin\n/* global __VERSION__ */\nconst VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : 'untranspiled source';\n\nconst STARTUP_MESSAGE = 'set luma.log.level=1 (or higher) to trace rendering';\n// Assign luma.log.level in console to control logging: \\\n// 0: none, 1: minimal, 2: verbose, 3: attribute/uniforms, 4: gl logs\n// luma.log.break[], set to gl funcs, luma.log.profile[] set to model names`;\n\nclass StatsManager {\n  constructor() {\n    this.stats = new Map();\n  }\n\n  get(name) {\n    if (!this.stats.has(name)) {\n      this.stats.set(name, new Stats({id: name}));\n    }\n\n    return this.stats.get(name);\n  }\n}\n\nconst lumaStats = new StatsManager();\n\nif (global.luma && global.luma.VERSION !== VERSION) {\n  throw new Error(`luma.gl - multiple VERSIONs detected: ${global.luma.VERSION} vs ${VERSION}`);\n}\n\nif (!global.luma) {\n  if (isBrowser()) {\n    log.log(1, `luma.gl ${VERSION} - ${STARTUP_MESSAGE}`)();\n  }\n\n  global.luma = global.luma || {\n    VERSION,\n    version: VERSION,\n    log,\n\n    // A global stats object that various components can add information to\n    // E.g. see webgl/resource.js\n    stats: lumaStats,\n\n    // Keep some luma globals in a sub-object\n    // This allows us to dynamically detect if certain modules have been\n    // included (such as IO and headless) and enable related functionality,\n    // without unconditionally requiring and thus bundling big dependencies\n    // into the app.\n    globals: {\n      modules: {},\n      nodeIO: {}\n    }\n  };\n}\n\nexport {lumaStats};\nexport default global.luma;\n"]},"metadata":{},"sourceType":"module"}