{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { withParameters } from '@luma.gl/gltools';\nimport { assertWebGL2Context } from '../webgl-utils';\nimport { assert } from '../utils';\nvar GL_DEPTH_BUFFER_BIT = 0x00000100;\nvar GL_STENCIL_BUFFER_BIT = 0x00000400;\nvar GL_COLOR_BUFFER_BIT = 0x00004000;\nvar GL_COLOR = 0x1800;\nvar GL_DEPTH = 0x1801;\nvar GL_STENCIL = 0x1802;\nvar GL_DEPTH_STENCIL = 0x84f9;\nvar ERR_ARGUMENTS = 'clear: bad arguments';\nexport function clear(gl) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$framebuffer = _ref.framebuffer,\n      framebuffer = _ref$framebuffer === void 0 ? null : _ref$framebuffer,\n      _ref$color = _ref.color,\n      color = _ref$color === void 0 ? null : _ref$color,\n      _ref$depth = _ref.depth,\n      depth = _ref$depth === void 0 ? null : _ref$depth,\n      _ref$stencil = _ref.stencil,\n      stencil = _ref$stencil === void 0 ? null : _ref$stencil;\n\n  var parameters = {};\n\n  if (framebuffer) {\n    parameters.framebuffer = framebuffer;\n  }\n\n  var clearFlags = 0;\n\n  if (color) {\n    clearFlags |= GL_COLOR_BUFFER_BIT;\n\n    if (color !== true) {\n      parameters.clearColor = color;\n    }\n  }\n\n  if (depth) {\n    clearFlags |= GL_DEPTH_BUFFER_BIT;\n\n    if (depth !== true) {\n      parameters.clearDepth = depth;\n    }\n  }\n\n  if (stencil) {\n    clearFlags |= GL_STENCIL_BUFFER_BIT;\n\n    if (depth !== true) {\n      parameters.clearStencil = depth;\n    }\n  }\n\n  assert(clearFlags !== 0, ERR_ARGUMENTS);\n  withParameters(gl, parameters, function () {\n    gl.clear(clearFlags);\n  });\n}\nexport function clearBuffer(gl) {\n  var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref2$framebuffer = _ref2.framebuffer,\n      framebuffer = _ref2$framebuffer === void 0 ? null : _ref2$framebuffer,\n      _ref2$buffer = _ref2.buffer,\n      buffer = _ref2$buffer === void 0 ? GL_COLOR : _ref2$buffer,\n      _ref2$drawBuffer = _ref2.drawBuffer,\n      drawBuffer = _ref2$drawBuffer === void 0 ? 0 : _ref2$drawBuffer,\n      _ref2$value = _ref2.value,\n      value = _ref2$value === void 0 ? [0, 0, 0, 0] : _ref2$value;\n\n  assertWebGL2Context(gl);\n  withParameters(gl, {\n    framebuffer: framebuffer\n  }, function () {\n    switch (buffer) {\n      case GL_COLOR:\n        switch (value.constructor) {\n          case Int32Array:\n            gl.clearBufferiv(buffer, drawBuffer, value);\n            break;\n\n          case Uint32Array:\n            gl.clearBufferuiv(buffer, drawBuffer, value);\n            break;\n\n          case Float32Array:\n          default:\n            gl.clearBufferfv(buffer, drawBuffer, value);\n        }\n\n        break;\n\n      case GL_DEPTH:\n        gl.clearBufferfv(GL_DEPTH, 0, [value]);\n        break;\n\n      case GL_STENCIL:\n        gl.clearBufferiv(GL_STENCIL, 0, [value]);\n        break;\n\n      case GL_DEPTH_STENCIL:\n        var _value = _slicedToArray(value, 2),\n            depth = _value[0],\n            stencil = _value[1];\n\n        gl.clearBufferfi(GL_DEPTH_STENCIL, 0, depth, stencil);\n        break;\n\n      default:\n        assert(false, ERR_ARGUMENTS);\n    }\n  });\n}","map":{"version":3,"sources":["../../../src/classes/clear.js"],"names":["GL_DEPTH_BUFFER_BIT","GL_STENCIL_BUFFER_BIT","GL_COLOR_BUFFER_BIT","GL_COLOR","GL_DEPTH","GL_STENCIL","GL_DEPTH_STENCIL","ERR_ARGUMENTS","framebuffer","color","depth","stencil","parameters","clearFlags","assert","withParameters","gl","buffer","drawBuffer","value","assertWebGL2Context"],"mappings":"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","sourcesContent":["import {withParameters} from '@luma.gl/gltools';\nimport {assertWebGL2Context} from '../webgl-utils';\nimport {assert} from '../utils';\n\n// Should collapse during minification\nconst GL_DEPTH_BUFFER_BIT = 0x00000100;\nconst GL_STENCIL_BUFFER_BIT = 0x00000400;\nconst GL_COLOR_BUFFER_BIT = 0x00004000;\n\nconst GL_COLOR = 0x1800;\nconst GL_DEPTH = 0x1801;\nconst GL_STENCIL = 0x1802;\nconst GL_DEPTH_STENCIL = 0x84f9;\n\n// Should disappear if asserts are removed\nconst ERR_ARGUMENTS = 'clear: bad arguments';\n\n// Optionally clears depth, color and stencil buffers\nexport function clear(gl, {framebuffer = null, color = null, depth = null, stencil = null} = {}) {\n  const parameters = {};\n\n  if (framebuffer) {\n    parameters.framebuffer = framebuffer;\n  }\n\n  let clearFlags = 0;\n\n  if (color) {\n    clearFlags |= GL_COLOR_BUFFER_BIT;\n    if (color !== true) {\n      parameters.clearColor = color;\n    }\n  }\n\n  if (depth) {\n    clearFlags |= GL_DEPTH_BUFFER_BIT;\n    if (depth !== true) {\n      parameters.clearDepth = depth;\n    }\n  }\n\n  if (stencil) {\n    clearFlags |= GL_STENCIL_BUFFER_BIT;\n    if (depth !== true) {\n      parameters.clearStencil = depth;\n    }\n  }\n\n  assert(clearFlags !== 0, ERR_ARGUMENTS);\n\n  // Temporarily set any clear \"colors\" and call clear\n  withParameters(gl, parameters, () => {\n    gl.clear(clearFlags);\n  });\n}\n\n// WebGL2 - clear a specific drawing buffer\nexport function clearBuffer(\n  gl,\n  {framebuffer = null, buffer = GL_COLOR, drawBuffer = 0, value = [0, 0, 0, 0]} = {}\n) {\n  assertWebGL2Context(gl);\n\n  withParameters(gl, {framebuffer}, () => {\n    // Method selection per OpenGL ES 3 docs\n    switch (buffer) {\n      case GL_COLOR:\n        switch (value.constructor) {\n          case Int32Array:\n            gl.clearBufferiv(buffer, drawBuffer, value);\n            break;\n          case Uint32Array:\n            gl.clearBufferuiv(buffer, drawBuffer, value);\n            break;\n          case Float32Array:\n          default:\n            gl.clearBufferfv(buffer, drawBuffer, value);\n        }\n        break;\n\n      case GL_DEPTH:\n        gl.clearBufferfv(GL_DEPTH, 0, [value]);\n        break;\n\n      case GL_STENCIL:\n        gl.clearBufferiv(GL_STENCIL, 0, [value]);\n        break;\n\n      case GL_DEPTH_STENCIL:\n        const [depth, stencil] = value;\n        gl.clearBufferfi(GL_DEPTH_STENCIL, 0, depth, stencil);\n        break;\n\n      default:\n        assert(false, ERR_ARGUMENTS);\n    }\n  });\n}\n"]},"metadata":{},"sourceType":"module"}