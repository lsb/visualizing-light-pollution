{"ast":null,"code":"import { Vector3 } from '@math.gl/core';\nvar WGS84_RADIUS_X = 6378137.0;\nvar WGS84_RADIUS_Y = 6378137.0;\nvar WGS84_RADIUS_Z = 6356752.3142451793;\nvar scratchVector = new Vector3();\nexport function getZoomFromBoundingVolume(boundingVolume) {\n  var halfAxes = boundingVolume.halfAxes,\n      radius = boundingVolume.radius,\n      width = boundingVolume.width,\n      height = boundingVolume.height;\n\n  if (halfAxes) {\n    halfAxes.getColumn(0, scratchVector);\n    var x = scratchVector.len();\n    halfAxes.getColumn(1, scratchVector);\n    var y = scratchVector.len();\n    halfAxes.getColumn(2, scratchVector);\n    var z = scratchVector.len();\n    var halfX = x / 2;\n    var halfY = y / 2;\n    var halfZ = z / 2;\n    var zoomX = Math.log2(WGS84_RADIUS_X / halfX);\n    var zoomY = Math.log2(WGS84_RADIUS_Y / halfY);\n    var zoomZ = Math.log2(WGS84_RADIUS_Z / halfZ);\n    return (zoomX + zoomY + zoomZ) / 3;\n  } else if (radius) {\n    return Math.log2(WGS84_RADIUS_Z / radius);\n  } else if (height && width) {\n    var _zoomX = Math.log2(WGS84_RADIUS_X / width);\n\n    var _zoomY = Math.log2(WGS84_RADIUS_Y / height);\n\n    return (_zoomX + _zoomY) / 2;\n  }\n\n  return 1;\n}","map":{"version":3,"sources":["../../../../src/tileset/helpers/zoom.js"],"names":["WGS84_RADIUS_X","WGS84_RADIUS_Y","WGS84_RADIUS_Z","scratchVector","halfAxes","radius","width","height","boundingVolume","x","y","z","halfX","halfY","halfZ","zoomX","Math","zoomY","zoomZ"],"mappings":"AAAA,SAAA,OAAA,QAAA,eAAA;AAEA,IAAMA,cAAc,GAApB,SAAA;AACA,IAAMC,cAAc,GAApB,SAAA;AACA,IAAMC,cAAc,GAApB,kBAAA;AAEA,IAAMC,aAAa,GAAG,IAAtB,OAAsB,EAAtB;AAEA,OAAO,SAAA,yBAAA,CAAA,cAAA,EAAmD;AAAA,MACjDC,QADiD,GACdI,cADc,CAAA,QAAA;AAAA,MACvCH,MADuC,GACdG,cADc,CAAA,MAAA;AAAA,MAC/BF,KAD+B,GACdE,cADc,CAAA,KAAA;AAAA,MACxBD,MADwB,GACdC,cADc,CAAA,MAAA;;AAGxD,MAAA,QAAA,EAAc;AAEZJ,IAAAA,QAAQ,CAARA,SAAAA,CAAAA,CAAAA,EAAAA,aAAAA;AACA,QAAMK,CAAC,GAAGN,aAAa,CAAvB,GAAUA,EAAV;AACAC,IAAAA,QAAQ,CAARA,SAAAA,CAAAA,CAAAA,EAAAA,aAAAA;AACA,QAAMM,CAAC,GAAGP,aAAa,CAAvB,GAAUA,EAAV;AACAC,IAAAA,QAAQ,CAARA,SAAAA,CAAAA,CAAAA,EAAAA,aAAAA;AACA,QAAMO,CAAC,GAAGR,aAAa,CAAvB,GAAUA,EAAV;AAEA,QAAMS,KAAK,GAAGH,CAAC,GAAf,CAAA;AACA,QAAMI,KAAK,GAAGH,CAAC,GAAf,CAAA;AACA,QAAMI,KAAK,GAAGH,CAAC,GAAf,CAAA;AAEA,QAAMI,KAAK,GAAGC,IAAI,CAAJA,IAAAA,CAAUhB,cAAc,GAAtC,KAAcgB,CAAd;AACA,QAAMC,KAAK,GAAGD,IAAI,CAAJA,IAAAA,CAAUf,cAAc,GAAtC,KAAce,CAAd;AACA,QAAME,KAAK,GAAGF,IAAI,CAAJA,IAAAA,CAAUd,cAAc,GAAtC,KAAcc,CAAd;AACA,WAAO,CAACD,KAAK,GAALA,KAAAA,GAAD,KAAA,IAAP,CAAA;AAhBF,GAAA,MAiBO,IAAA,MAAA,EAAY;AAEjB,WAAOC,IAAI,CAAJA,IAAAA,CAAUd,cAAc,GAA/B,MAAOc,CAAP;AAFK,GAAA,MAGA,IAAIT,MAAM,IAAV,KAAA,EAAqB;AAE1B,QAAMQ,MAAK,GAAGC,IAAI,CAAJA,IAAAA,CAAUhB,cAAc,GAAtC,KAAcgB,CAAd;;AACA,QAAMC,MAAK,GAAGD,IAAI,CAAJA,IAAAA,CAAUf,cAAc,GAAtC,MAAce,CAAd;;AAEA,WAAO,CAACD,MAAK,GAAN,MAAA,IAAP,CAAA;AACD;;AAED,SAAA,CAAA;AACD","sourcesContent":["import {Vector3} from '@math.gl/core';\n\nconst WGS84_RADIUS_X = 6378137.0;\nconst WGS84_RADIUS_Y = 6378137.0;\nconst WGS84_RADIUS_Z = 6356752.3142451793;\n\nconst scratchVector = new Vector3();\n\nexport function getZoomFromBoundingVolume(boundingVolume) {\n  const {halfAxes, radius, width, height} = boundingVolume;\n\n  if (halfAxes) {\n    // OrientedBoundingBox\n    halfAxes.getColumn(0, scratchVector);\n    const x = scratchVector.len();\n    halfAxes.getColumn(1, scratchVector);\n    const y = scratchVector.len();\n    halfAxes.getColumn(2, scratchVector);\n    const z = scratchVector.len();\n\n    const halfX = x / 2;\n    const halfY = y / 2;\n    const halfZ = z / 2;\n\n    const zoomX = Math.log2(WGS84_RADIUS_X / halfX);\n    const zoomY = Math.log2(WGS84_RADIUS_Y / halfY);\n    const zoomZ = Math.log2(WGS84_RADIUS_Z / halfZ);\n    return (zoomX + zoomY + zoomZ) / 3;\n  } else if (radius) {\n    // BoundingSphere\n    return Math.log2(WGS84_RADIUS_Z / radius);\n  } else if (height && width) {\n    // BoundingRectangle\n    const zoomX = Math.log2(WGS84_RADIUS_X / width);\n    const zoomY = Math.log2(WGS84_RADIUS_Y / height);\n\n    return (zoomX + zoomY) / 2;\n  }\n\n  return 1;\n}\n"]},"metadata":{},"sourceType":"module"}