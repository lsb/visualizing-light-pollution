{"ast":null,"code":"import _createForOfIteratorHelper from \"/home/lsb/wikidatageo/dark-sky-vacations/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";\nimport _possibleConstructorReturn from \"/home/lsb/wikidatageo/dark-sky-vacations/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _assertThisInitialized from \"/home/lsb/wikidatageo/dark-sky-vacations/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _createSuper from \"/home/lsb/wikidatageo/dark-sky-vacations/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _inherits from \"/home/lsb/wikidatageo/dark-sky-vacations/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _defineProperty from \"/home/lsb/wikidatageo/dark-sky-vacations/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/home/lsb/wikidatageo/dark-sky-vacations/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"/home/lsb/wikidatageo/dark-sky-vacations/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _classCallCheck from \"/home/lsb/wikidatageo/dark-sky-vacations/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/lsb/wikidatageo/dark-sky-vacations/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\n// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nimport { valueToString } from '../util/pretty';\n/** @ignore */\n\nvar kParent = Symbol.for('parent');\n/** @ignore */\n\nvar kRowIndex = Symbol.for('rowIndex');\n/** @ignore */\n\nvar kKeyToIdx = Symbol.for('keyToIdx');\n/** @ignore */\n\nvar kIdxToVal = Symbol.for('idxToVal');\n/** @ignore */\n\nvar kCustomInspect = Symbol.for('nodejs.util.inspect.custom');\n\nvar Row = /*#__PURE__*/function () {\n  function Row(parent, numKeys) {\n    _classCallCheck(this, Row);\n\n    this[kParent] = parent;\n    this.size = numKeys;\n  }\n\n  _createClass(Row, [{\n    key: \"entries\",\n    value: function entries() {\n      return this[Symbol.iterator]();\n    }\n  }, {\n    key: \"has\",\n    value: function has(key) {\n      return this.get(key) !== undefined;\n    }\n  }, {\n    key: \"get\",\n    value: function get(key) {\n      var val = undefined;\n\n      if (key !== null && key !== undefined) {\n        var ktoi = this[kKeyToIdx] || (this[kKeyToIdx] = new Map());\n        var idx = ktoi.get(key);\n\n        if (idx !== undefined) {\n          var itov = this[kIdxToVal] || (this[kIdxToVal] = new Array(this.size));\n          (val = itov[idx]) !== undefined || (itov[idx] = val = this.getValue(idx));\n        } else if ((idx = this.getIndex(key)) > -1) {\n          ktoi.set(key, idx);\n\n          var _itov = this[kIdxToVal] || (this[kIdxToVal] = new Array(this.size));\n\n          (val = _itov[idx]) !== undefined || (_itov[idx] = val = this.getValue(idx));\n        }\n      }\n\n      return val;\n    }\n  }, {\n    key: \"set\",\n    value: function set(key, val) {\n      if (key !== null && key !== undefined) {\n        var ktoi = this[kKeyToIdx] || (this[kKeyToIdx] = new Map());\n        var idx = ktoi.get(key);\n\n        if (idx === undefined) {\n          ktoi.set(key, idx = this.getIndex(key));\n        }\n\n        if (idx > -1) {\n          var itov = this[kIdxToVal] || (this[kIdxToVal] = new Array(this.size));\n          itov[idx] = this.setValue(idx, val);\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      throw new Error(\"Clearing \".concat(this[Symbol.toStringTag], \" not supported.\"));\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(_) {\n      throw new Error(\"Deleting \".concat(this[Symbol.toStringTag], \" values not supported.\"));\n    }\n  }, {\n    key: Symbol.iterator,\n    value: /*#__PURE__*/_regeneratorRuntime.mark(function value() {\n      var ki, vi, ktoi, itov, k, v, i, kr, vr;\n      return _regeneratorRuntime.wrap(function value$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              ki = this.keys();\n              vi = this.values();\n              ktoi = this[kKeyToIdx] || (this[kKeyToIdx] = new Map());\n              itov = this[kIdxToVal] || (this[kIdxToVal] = new Array(this.size));\n              i = 0;\n\n            case 5:\n              if ((kr = ki.next()).done || (vr = vi.next()).done) {\n                _context.next = 15;\n                break;\n              }\n\n              k = kr.value;\n              v = vr.value;\n              itov[i] = v;\n              ktoi.has(k) || ktoi.set(k, i);\n              _context.next = 12;\n              return [k, v];\n\n            case 12:\n              ++i;\n              _context.next = 5;\n              break;\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, value, this);\n    })\n  }, {\n    key: \"forEach\",\n    value: function forEach(callbackfn, thisArg) {\n      var ki = this.keys();\n      var vi = this.values();\n      var callback = thisArg === undefined ? callbackfn : function (v, k, m) {\n        return callbackfn.call(thisArg, v, k, m);\n      };\n      var ktoi = this[kKeyToIdx] || (this[kKeyToIdx] = new Map());\n      var itov = this[kIdxToVal] || (this[kIdxToVal] = new Array(this.size));\n\n      for (var k, v, i = 0, kr, vr; !((kr = ki.next()).done || (vr = vi.next()).done); ++i) {\n        k = kr.value;\n        v = vr.value;\n        itov[i] = v;\n        ktoi.has(k) || ktoi.set(k, i);\n        callback(v, k, this);\n      }\n    }\n  }, {\n    key: \"toArray\",\n    value: function toArray() {\n      return _toConsumableArray(this.values());\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      var obj = {};\n      this.forEach(function (val, key) {\n        return obj[key] = val;\n      });\n      return obj;\n    }\n  }, {\n    key: \"inspect\",\n    value: function inspect() {\n      return this.toString();\n    }\n  }, {\n    key: kCustomInspect,\n    value: function value() {\n      return this.toString();\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      var str = [];\n      this.forEach(function (val, key) {\n        key = valueToString(key);\n        val = valueToString(val);\n        str.push(\"\".concat(key, \": \").concat(val));\n      });\n      return \"{ \".concat(str.join(', '), \" }\");\n    }\n  }]);\n\n  return Row;\n}();\n\nRow[Symbol.toStringTag] = function (proto) {\n  var _Object$definePropert;\n\n  Object.defineProperties(proto, (_Object$definePropert = {\n    'size': {\n      writable: true,\n      enumerable: false,\n      configurable: false,\n      value: 0\n    }\n  }, _defineProperty(_Object$definePropert, kParent, {\n    writable: true,\n    enumerable: false,\n    configurable: false,\n    value: null\n  }), _defineProperty(_Object$definePropert, kRowIndex, {\n    writable: true,\n    enumerable: false,\n    configurable: false,\n    value: -1\n  }), _Object$definePropert));\n  return proto[Symbol.toStringTag] = 'Row';\n}(Row.prototype);\n\nexport var MapRow = /*#__PURE__*/function (_Row) {\n  _inherits(MapRow, _Row);\n\n  var _super = _createSuper(MapRow);\n\n  function MapRow(slice) {\n    var _this;\n\n    _classCallCheck(this, MapRow);\n\n    _this = _super.call(this, slice, slice.length);\n    return _possibleConstructorReturn(_this, createRowProxy(_assertThisInitialized(_this)));\n  }\n\n  _createClass(MapRow, [{\n    key: \"keys\",\n    value: function keys() {\n      return this[kParent].getChildAt(0)[Symbol.iterator]();\n    }\n  }, {\n    key: \"values\",\n    value: function values() {\n      return this[kParent].getChildAt(1)[Symbol.iterator]();\n    }\n  }, {\n    key: \"getKey\",\n    value: function getKey(idx) {\n      return this[kParent].getChildAt(0).get(idx);\n    }\n  }, {\n    key: \"getIndex\",\n    value: function getIndex(key) {\n      return this[kParent].getChildAt(0).indexOf(key);\n    }\n  }, {\n    key: \"getValue\",\n    value: function getValue(index) {\n      return this[kParent].getChildAt(1).get(index);\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(index, value) {\n      this[kParent].getChildAt(1).set(index, value);\n    }\n  }]);\n\n  return MapRow;\n}(Row);\nexport var StructRow = /*#__PURE__*/function (_Row2) {\n  _inherits(StructRow, _Row2);\n\n  var _super2 = _createSuper(StructRow);\n\n  function StructRow(parent) {\n    var _this2;\n\n    _classCallCheck(this, StructRow);\n\n    _this2 = _super2.call(this, parent, parent.type.children.length);\n    return _possibleConstructorReturn(_this2, defineRowProxyProperties(_assertThisInitialized(_this2)));\n  }\n\n  _createClass(StructRow, [{\n    key: \"keys\",\n    value: /*#__PURE__*/_regeneratorRuntime.mark(function keys() {\n      var _iterator, _step, field;\n\n      return _regeneratorRuntime.wrap(function keys$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _iterator = _createForOfIteratorHelper(this[kParent].type.children);\n              _context2.prev = 1;\n\n              _iterator.s();\n\n            case 3:\n              if ((_step = _iterator.n()).done) {\n                _context2.next = 9;\n                break;\n              }\n\n              field = _step.value;\n              _context2.next = 7;\n              return field.name;\n\n            case 7:\n              _context2.next = 3;\n              break;\n\n            case 9:\n              _context2.next = 14;\n              break;\n\n            case 11:\n              _context2.prev = 11;\n              _context2.t0 = _context2[\"catch\"](1);\n\n              _iterator.e(_context2.t0);\n\n            case 14:\n              _context2.prev = 14;\n\n              _iterator.f();\n\n              return _context2.finish(14);\n\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, keys, this, [[1, 11, 14, 17]]);\n    })\n  }, {\n    key: \"values\",\n    value: /*#__PURE__*/_regeneratorRuntime.mark(function values() {\n      var _iterator2, _step2, field;\n\n      return _regeneratorRuntime.wrap(function values$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _iterator2 = _createForOfIteratorHelper(this[kParent].type.children);\n              _context3.prev = 1;\n\n              _iterator2.s();\n\n            case 3:\n              if ((_step2 = _iterator2.n()).done) {\n                _context3.next = 9;\n                break;\n              }\n\n              field = _step2.value;\n              _context3.next = 7;\n              return this[field.name];\n\n            case 7:\n              _context3.next = 3;\n              break;\n\n            case 9:\n              _context3.next = 14;\n              break;\n\n            case 11:\n              _context3.prev = 11;\n              _context3.t0 = _context3[\"catch\"](1);\n\n              _iterator2.e(_context3.t0);\n\n            case 14:\n              _context3.prev = 14;\n\n              _iterator2.f();\n\n              return _context3.finish(14);\n\n            case 17:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, values, this, [[1, 11, 14, 17]]);\n    })\n  }, {\n    key: \"getKey\",\n    value: function getKey(idx) {\n      return this[kParent].type.children[idx].name;\n    }\n  }, {\n    key: \"getIndex\",\n    value: function getIndex(key) {\n      return this[kParent].type.children.findIndex(function (f) {\n        return f.name === key;\n      });\n    }\n  }, {\n    key: \"getValue\",\n    value: function getValue(index) {\n      return this[kParent].getChildAt(index).get(this[kRowIndex]);\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(index, value) {\n      return this[kParent].getChildAt(index).set(this[kRowIndex], value);\n    }\n  }]);\n\n  return StructRow;\n}(Row);\nObject.setPrototypeOf(Row.prototype, Map.prototype);\n/** @ignore */\n\nvar defineRowProxyProperties = function () {\n  var desc = {\n    enumerable: true,\n    configurable: false,\n    get: null,\n    set: null\n  };\n  return function (row) {\n    var idx = -1,\n        ktoi = row[kKeyToIdx] || (row[kKeyToIdx] = new Map());\n\n    var getter = function getter(key) {\n      return function () {\n        return this.get(key);\n      };\n    };\n\n    var setter = function setter(key) {\n      return function (val) {\n        return this.set(key, val);\n      };\n    };\n\n    var _iterator3 = _createForOfIteratorHelper(row.keys()),\n        _step3;\n\n    try {\n      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n        var key = _step3.value;\n        ktoi.set(key, ++idx);\n        desc.get = getter(key);\n        desc.set = setter(key);\n        row.hasOwnProperty(key) || (desc.enumerable = true, Object.defineProperty(row, key, desc));\n        row.hasOwnProperty(idx) || (desc.enumerable = false, Object.defineProperty(row, idx, desc));\n      }\n    } catch (err) {\n      _iterator3.e(err);\n    } finally {\n      _iterator3.f();\n    }\n\n    desc.get = desc.set = null;\n    return row;\n  };\n}();\n/** @ignore */\n\n\nvar createRowProxy = function () {\n  if (typeof Proxy === 'undefined') {\n    return defineRowProxyProperties;\n  }\n\n  var has = Row.prototype.has;\n  var _get = Row.prototype.get;\n  var _set = Row.prototype.set;\n  var getKey = Row.prototype.getKey;\n  var RowProxyHandler = {\n    isExtensible: function isExtensible() {\n      return false;\n    },\n    deleteProperty: function deleteProperty() {\n      return false;\n    },\n    preventExtensions: function preventExtensions() {\n      return true;\n    },\n    ownKeys: function ownKeys(row) {\n      return _toConsumableArray(row.keys()).map(function (x) {\n        return \"\".concat(x);\n      });\n    },\n    has: function has(row, key) {\n      switch (key) {\n        case 'getKey':\n        case 'getIndex':\n        case 'getValue':\n        case 'setValue':\n        case 'toArray':\n        case 'toJSON':\n        case 'inspect':\n        case 'constructor':\n        case 'isPrototypeOf':\n        case 'propertyIsEnumerable':\n        case 'toString':\n        case 'toLocaleString':\n        case 'valueOf':\n        case 'size':\n        case 'has':\n        case 'get':\n        case 'set':\n        case 'clear':\n        case 'delete':\n        case 'keys':\n        case 'values':\n        case 'entries':\n        case 'forEach':\n        case '__proto__':\n        case '__defineGetter__':\n        case '__defineSetter__':\n        case 'hasOwnProperty':\n        case '__lookupGetter__':\n        case '__lookupSetter__':\n        case Symbol.iterator:\n        case Symbol.toStringTag:\n        case kParent:\n        case kRowIndex:\n        case kIdxToVal:\n        case kKeyToIdx:\n        case kCustomInspect:\n          return true;\n      }\n\n      if (typeof key === 'number' && !row.has(key)) {\n        key = row.getKey(key);\n      }\n\n      return row.has(key);\n    },\n    get: function get(row, key, receiver) {\n      switch (key) {\n        case 'getKey':\n        case 'getIndex':\n        case 'getValue':\n        case 'setValue':\n        case 'toArray':\n        case 'toJSON':\n        case 'inspect':\n        case 'constructor':\n        case 'isPrototypeOf':\n        case 'propertyIsEnumerable':\n        case 'toString':\n        case 'toLocaleString':\n        case 'valueOf':\n        case 'size':\n        case 'has':\n        case 'get':\n        case 'set':\n        case 'clear':\n        case 'delete':\n        case 'keys':\n        case 'values':\n        case 'entries':\n        case 'forEach':\n        case '__proto__':\n        case '__defineGetter__':\n        case '__defineSetter__':\n        case 'hasOwnProperty':\n        case '__lookupGetter__':\n        case '__lookupSetter__':\n        case Symbol.iterator:\n        case Symbol.toStringTag:\n        case kParent:\n        case kRowIndex:\n        case kIdxToVal:\n        case kKeyToIdx:\n        case kCustomInspect:\n          return Reflect.get(row, key, receiver);\n      }\n\n      if (typeof key === 'number' && !has.call(receiver, key)) {\n        key = getKey.call(receiver, key);\n      }\n\n      return _get.call(receiver, key);\n    },\n    set: function set(row, key, val, receiver) {\n      switch (key) {\n        case kParent:\n        case kRowIndex:\n        case kIdxToVal:\n        case kKeyToIdx:\n          return Reflect.set(row, key, val, receiver);\n\n        case 'getKey':\n        case 'getIndex':\n        case 'getValue':\n        case 'setValue':\n        case 'toArray':\n        case 'toJSON':\n        case 'inspect':\n        case 'constructor':\n        case 'isPrototypeOf':\n        case 'propertyIsEnumerable':\n        case 'toString':\n        case 'toLocaleString':\n        case 'valueOf':\n        case 'size':\n        case 'has':\n        case 'get':\n        case 'set':\n        case 'clear':\n        case 'delete':\n        case 'keys':\n        case 'values':\n        case 'entries':\n        case 'forEach':\n        case '__proto__':\n        case '__defineGetter__':\n        case '__defineSetter__':\n        case 'hasOwnProperty':\n        case '__lookupGetter__':\n        case '__lookupSetter__':\n        case Symbol.iterator:\n        case Symbol.toStringTag:\n          return false;\n      }\n\n      if (typeof key === 'number' && !has.call(receiver, key)) {\n        key = getKey.call(receiver, key);\n      }\n\n      return has.call(receiver, key) ? !!_set.call(receiver, key, val) : false;\n    }\n  };\n  return function (row) {\n    return new Proxy(row, RowProxyHandler);\n  };\n}();","map":{"version":3,"sources":["vector/row.ts"],"names":[],"mappings":"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","sourcesContent":["// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n\nimport { Vector } from '../vector';\nimport { StructVector } from './struct';\nimport { valueToString } from '../util/pretty';\nimport { DataType, Struct, RowLike } from '../type';\n\n/** @ignore */ const kParent = Symbol.for('parent');\n/** @ignore */ const kRowIndex = Symbol.for('rowIndex');\n/** @ignore */ const kKeyToIdx = Symbol.for('keyToIdx');\n/** @ignore */ const kIdxToVal = Symbol.for('idxToVal');\n/** @ignore */ const kCustomInspect = Symbol.for('nodejs.util.inspect.custom');\n\nabstract class Row<K extends PropertyKey = any, V = any> implements Map<K, V> {\n\n    public readonly size: number;\n    public readonly [Symbol.toStringTag]: string;\n\n    protected [kRowIndex]: number;\n    protected [kParent]: Vector<Struct>;\n    protected [kKeyToIdx]: Map<K, number>;\n    protected [kIdxToVal]: V[];\n\n    constructor(parent: Vector<Struct>, numKeys: number) {\n        this[kParent] = parent;\n        this.size = numKeys;\n    }\n\n    public abstract keys(): IterableIterator<K>;\n    public abstract values(): IterableIterator<V>;\n    public abstract getKey(idx: number): K;\n    public abstract getIndex(key: K): number;\n    public abstract getValue(idx: number): V;\n    public abstract setValue(idx: number, val: V): void;\n\n    public entries() { return this[Symbol.iterator](); }\n\n    public has(key: K) { return this.get(key) !== undefined; }\n\n    public get(key: K) {\n        let val = undefined;\n        if (key !== null && key !== undefined) {\n            const ktoi = this[kKeyToIdx] || (this[kKeyToIdx] = new Map());\n            let idx = ktoi.get(key);\n            if (idx !== undefined) {\n                const itov = this[kIdxToVal] || (this[kIdxToVal] = new Array(this.size));\n                ((val = itov[idx]) !== undefined) || (itov[idx] = val = this.getValue(idx));\n            } else if ((idx = this.getIndex(key)) > -1) {\n                ktoi.set(key, idx);\n                const itov = this[kIdxToVal] || (this[kIdxToVal] = new Array(this.size));\n                ((val = itov[idx]) !== undefined) || (itov[idx] = val = this.getValue(idx));\n            }\n        }\n        return val;\n    }\n\n    public set(key: K, val: V) {\n        if (key !== null && key !== undefined) {\n            const ktoi = this[kKeyToIdx] || (this[kKeyToIdx] = new Map());\n            let idx = ktoi.get(key);\n            if (idx === undefined) {\n                ktoi.set(key, idx = this.getIndex(key));\n            }\n            if (idx > -1) {\n                const itov = this[kIdxToVal] || (this[kIdxToVal] = new Array(this.size));\n                itov[idx] = <any> this.setValue(idx, val);\n            }\n        }\n        return this;\n    }\n\n    public clear(): void { throw new Error(`Clearing ${this[Symbol.toStringTag]} not supported.`); }\n\n    public delete(_: K): boolean { throw new Error(`Deleting ${this[Symbol.toStringTag]} values not supported.`); }\n\n    public *[Symbol.iterator](): IterableIterator<[K, V]> {\n\n        const ki = this.keys();\n        const vi = this.values();\n        const ktoi = this[kKeyToIdx] || (this[kKeyToIdx] = new Map());\n        const itov = this[kIdxToVal] || (this[kIdxToVal] = new Array(this.size));\n\n        for (let k: K, v: V, i = 0, kr: IteratorResult<K>, vr: IteratorResult<V>;\n            !((kr = ki.next()).done || (vr = vi.next()).done);\n            ++i\n        ) {\n            k = kr.value;\n            v = vr.value;\n            itov[i] = v;\n            ktoi.has(k) || ktoi.set(k, i);\n            yield [k, v];\n        }\n    }\n\n    public forEach(callbackfn: (value: V, key: K, map: Map<K, V>) => void, thisArg?: any): void {\n\n        const ki = this.keys();\n        const vi = this.values();\n        const callback = thisArg === undefined ? callbackfn :\n            (v: V, k: K, m: Map<K, V>) => callbackfn.call(thisArg, v, k, m);\n        const ktoi = this[kKeyToIdx] || (this[kKeyToIdx] = new Map());\n        const itov = this[kIdxToVal] || (this[kIdxToVal] = new Array(this.size));\n\n        for (let k: K, v: V, i = 0, kr: IteratorResult<K>, vr: IteratorResult<V>;\n            !((kr = ki.next()).done || (vr = vi.next()).done);\n            ++i\n        ) {\n            k = kr.value;\n            v = vr.value;\n            itov[i] = v;\n            ktoi.has(k) || ktoi.set(k, i);\n            callback(v, k, this);\n        }\n    }\n\n    public toArray() { return [...this.values()]; }\n    public toJSON() {\n        const obj = {} as any;\n        this.forEach((val, key) => obj[key] = val);\n        return obj;\n    }\n\n    public inspect() { return this.toString(); }\n    public [kCustomInspect]() { return this.toString(); }\n    public toString() {\n        const str: string[] = [];\n        this.forEach((val, key) => {\n            key = valueToString(key);\n            val = valueToString(val);\n            str.push(`${key}: ${val}`);\n        });\n        return `{ ${str.join(', ')} }`;\n    }\n\n    protected static [Symbol.toStringTag] = ((proto: Row) => {\n        Object.defineProperties(proto, {\n            'size': { writable: true, enumerable: false, configurable: false, value: 0 },\n            [kParent]: { writable: true, enumerable: false, configurable: false, value: null },\n            [kRowIndex]: { writable: true, enumerable: false, configurable: false, value: -1 },\n        });\n        return (proto as any)[Symbol.toStringTag] = 'Row';\n    })(Row.prototype);\n}\n\nexport class MapRow<K extends DataType = any, V extends DataType = any> extends Row<K['TValue'], V['TValue'] | null> {\n    constructor(slice: Vector<Struct<{ key: K, value: V }>>) {\n        super(slice, slice.length);\n        return createRowProxy(this);\n    }\n    public keys() {\n        return this[kParent].getChildAt(0)![Symbol.iterator]();\n    }\n    public values() {\n        return this[kParent].getChildAt(1)![Symbol.iterator]();\n    }\n    public getKey(idx: number): K['TValue'] {\n        return this[kParent].getChildAt(0)!.get(idx);\n    }\n    public getIndex(key: K['TValue']): number {\n        return this[kParent].getChildAt(0)!.indexOf(key);\n    }\n    public getValue(index: number): V['TValue'] | null {\n        return this[kParent].getChildAt(1)!.get(index);\n    }\n    public setValue(index: number, value: V['TValue'] | null): void {\n        this[kParent].getChildAt(1)!.set(index, value);\n    }\n}\n\nexport class StructRow<T extends { [key: string]: DataType } = any> extends Row<keyof T, T[keyof T]['TValue'] | null> {\n    constructor(parent: StructVector<T>) {\n        super(parent, parent.type.children.length);\n        return defineRowProxyProperties(this);\n    }\n    public *keys() {\n        for (const field of this[kParent].type.children) {\n            yield field.name as keyof T;\n        }\n    }\n    public *values() {\n        for (const field of this[kParent].type.children) {\n            yield (this as RowLike<T>)[field.name];\n        }\n    }\n    public getKey(idx: number): keyof T {\n        return this[kParent].type.children[idx].name as keyof T;\n    }\n    public getIndex(key: keyof T): number {\n        return this[kParent].type.children.findIndex((f) => f.name === key);\n    }\n    public getValue(index: number): T[keyof T]['TValue'] | null {\n        return this[kParent].getChildAt(index)!.get(this[kRowIndex]);\n    }\n    public setValue(index: number, value: T[keyof T]['TValue'] | null): void {\n        return this[kParent].getChildAt(index)!.set(this[kRowIndex], value);\n    }\n}\n\nObject.setPrototypeOf(Row.prototype, Map.prototype);\n\n/** @ignore */\nconst defineRowProxyProperties = (() => {\n    const desc = { enumerable: true, configurable: false, get: null as any, set: null as any };\n    return <T extends Row>(row: T) => {\n        let idx = -1, ktoi = row[kKeyToIdx] || (row[kKeyToIdx] = new Map());\n        const getter = (key: any) => function(this: T) { return this.get(key); };\n        const setter = (key: any) => function(this: T, val: any) { return this.set(key, val); };\n        for (const key of row.keys()) {\n            ktoi.set(key, ++idx);\n            desc.get = getter(key);\n            desc.set = setter(key);\n            row.hasOwnProperty(key) || (desc.enumerable = true, Object.defineProperty(row, key, desc));\n            row.hasOwnProperty(idx) || (desc.enumerable = false, Object.defineProperty(row, idx, desc));\n        }\n        desc.get = desc.set = null;\n        return row;\n    };\n})();\n\n/** @ignore */\nconst createRowProxy = (() => {\n    if (typeof Proxy === 'undefined') {\n        return defineRowProxyProperties;\n    }\n    const has = Row.prototype.has;\n    const get = Row.prototype.get;\n    const set = Row.prototype.set;\n    const getKey = Row.prototype.getKey;\n    const RowProxyHandler: ProxyHandler<Row> = {\n        isExtensible() { return false; },\n        deleteProperty() { return false; },\n        preventExtensions() { return true; },\n        ownKeys(row: Row) { return [...row.keys()].map((x) => `${x}`); },\n        has(row: Row, key: PropertyKey) {\n            switch (key) {\n                case 'getKey': case 'getIndex': case 'getValue': case 'setValue': case 'toArray': case 'toJSON': case 'inspect':\n                case 'constructor': case 'isPrototypeOf': case 'propertyIsEnumerable': case 'toString': case 'toLocaleString': case 'valueOf':\n                case 'size': case 'has': case 'get': case 'set': case 'clear': case 'delete': case 'keys': case 'values': case 'entries': case 'forEach':\n                case '__proto__': case '__defineGetter__': case '__defineSetter__': case 'hasOwnProperty': case '__lookupGetter__': case '__lookupSetter__':\n                case Symbol.iterator: case Symbol.toStringTag: case kParent: case kRowIndex: case kIdxToVal: case kKeyToIdx: case kCustomInspect:\n                    return true;\n            }\n            if (typeof key === 'number' && !row.has(key)) {\n                key = row.getKey(key);\n            }\n            return row.has(key);\n        },\n        get(row: Row, key: PropertyKey, receiver: any) {\n            switch (key) {\n                case 'getKey': case 'getIndex': case 'getValue': case 'setValue': case 'toArray': case 'toJSON': case 'inspect':\n                case 'constructor': case 'isPrototypeOf': case 'propertyIsEnumerable': case 'toString': case 'toLocaleString': case 'valueOf':\n                case 'size': case 'has': case 'get': case 'set': case 'clear': case 'delete': case 'keys': case 'values': case 'entries': case 'forEach':\n                case '__proto__': case '__defineGetter__': case '__defineSetter__': case 'hasOwnProperty': case '__lookupGetter__': case '__lookupSetter__':\n                case Symbol.iterator: case Symbol.toStringTag: case kParent: case kRowIndex: case kIdxToVal: case kKeyToIdx: case kCustomInspect:\n                    return Reflect.get(row, key, receiver);\n            }\n            if (typeof key === 'number' && !has.call(receiver, key)) {\n                key = getKey.call(receiver, key);\n            }\n            return get.call(receiver, key);\n        },\n        set(row: Row, key: PropertyKey, val: any, receiver: any) {\n            switch (key) {\n                case kParent: case kRowIndex: case kIdxToVal: case kKeyToIdx:\n                    return Reflect.set(row, key, val, receiver);\n                case 'getKey': case 'getIndex': case 'getValue': case 'setValue': case 'toArray': case 'toJSON': case 'inspect':\n                case 'constructor': case 'isPrototypeOf': case 'propertyIsEnumerable': case 'toString': case 'toLocaleString': case 'valueOf':\n                case 'size': case 'has': case 'get': case 'set': case 'clear': case 'delete': case 'keys': case 'values': case 'entries': case 'forEach':\n                case '__proto__': case '__defineGetter__': case '__defineSetter__': case 'hasOwnProperty': case '__lookupGetter__': case '__lookupSetter__':\n                case Symbol.iterator: case Symbol.toStringTag:\n                    return false;\n            }\n            if (typeof key === 'number' && !has.call(receiver, key)) {\n                key = getKey.call(receiver, key);\n            }\n            return has.call(receiver, key) ? !!set.call(receiver, key, val) : false;\n        },\n    };\n    return <T extends Row>(row: T) => new Proxy(row, RowProxyHandler) as T;\n})();\n"]},"metadata":{},"sourceType":"module"}