"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getBlob = getBlob;
exports.getBlobOrDataUrl = getBlobOrDataUrl;
var SVG_DATA_URL_PATTERN = /^data:image\/svg\+xml/;
var SVG_URL_PATTERN = /\.svg((\?|#).*)?$/;

function getBlob(arrayBuffer, url) {
  if (isSVG(url)) {
    console.warn('SVG cannot be parsed to imagebitmap');
    return new Blob([new Uint8Array(arrayBuffer)], {
      type: 'image/svg+xml'
    });
  }

  return new Blob([new Uint8Array(arrayBuffer)]);
}

function getBlobOrDataUrl(arrayBuffer, url) {
  if (isSVG(url)) {
    var textDecoder = new TextDecoder();
    var xmlText = textDecoder.decode(arrayBuffer);
    var src = "data:image/svg+xml;base64,".concat(btoa(xmlText));
    return src;
  }

  return getBlob(arrayBuffer, url);
}

function isSVG(url) {
  return url && (SVG_DATA_URL_PATTERN.test(url) || SVG_URL_PATTERN.test(url));
}
//# sourceMappingURL=get-blob.js.map