!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){"use strict";(function(t,r){n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));const i={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==t&&t,document:"undefined"!=typeof document&&document},o=i.global||i.self||i.window,a="object"!=typeof r||"[object process]"!==String(r)||r.browser,u=void 0!==r&&r.version&&r.version.match(/v([0-9]*)/);u&&parseFloat(u[1])}).call(this,n(1),n(3))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){(function(e){const r=n(4),i="undefined"==typeof window?e:window;i.loaders=i.loaders||{},t.exports=Object.assign(i.loaders,r)}).call(this,n(1))},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var c,s=[],f=!1,g=-1;function d(){f&&c&&(f=!1,c.length?s=c.concat(s):g=-1,s.length&&l())}function l(){if(!f){var t=u(d);f=!0;for(var e=s.length;e;){for(c=s,s=[];++g<e;)c&&c[g].run();g=-1,e=s.length}c=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||f||u(l)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e)}n.r(e);var i=n(0);const{_parseImageNode:o}=i.a,a="undefined"!=typeof Image,u="undefined"!=typeof ImageBitmap,c=Boolean(o);function s(t){switch(t){case"auto":return u||a||c;case"imagebitmap":return u;case"html":case"image":return a;case"ndarray":case"data":return!!i.b||c;default:throw new Error(`@loaders.gl/images: image ${t} not supported in this environment`)}}function f(){if(s("image"))return"image";if(s("imagebitmap"))return"imagebitmap";if(s("data"))return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function g(t){return Boolean(m(t))}function d(t){const e=m(t);if(!e)throw new Error("Not an image");return e}function l(t){switch(d(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:return r(!1)}}function m(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&t instanceof Image?"image":t&&"object"==typeof t&&t.data&&t.width&&t.height?"data":null}const p=/^data:image\/svg\+xml/,w=/\.svg((\?|#).*)?$/;function h(t,e){return y(e)?(console.warn("SVG cannot be parsed to imagebitmap"),new Blob([new Uint8Array(t)],{type:"image/svg+xml"})):new Blob([new Uint8Array(t)])}function y(t){return t&&(p.test(t)||w.test(t))}async function b(t,e,n){const r=function(t,e){if(y(e)){const e=(new TextDecoder).decode(t);return`data:image/svg+xml;base64,${btoa(e)}`}return h(t,e)}(t,n),i=self.URL||self.webkitURL,o="string"!=typeof r&&i.createObjectURL(r);try{return await async function(t,e){const n=new Image;if(n.src=t,e.image&&e.image.decode&&n.decode)return await n.decode(),n;return await new Promise((e,r)=>{try{n.onload=()=>e(n),n.onerror=e=>r(new Error(`Could not load image ${t}: ${e}`))}catch(t){r(t)}})}(o||r,e)}finally{o&&i.revokeObjectURL(o)}}let v=!0;async function I(t,e,n){const r=h(t,n);let i=e&&e.imagebitmap;if(!function(t){for(const e in t||x)return!0;return!1}(i)&&v||(i=null),i)try{return await createImageBitmap(r,i)}catch(t){console.warn(t),v=!1}return await createImageBitmap(r)}const x={};const T=!1,U=!0,j=new Map([["image/png",{test:L,getSize:function(t){return{width:t.getUint32(16,T),height:t.getUint32(20,T)}}}],["image/jpeg",{test:E,getSize:function(t){if(t.byteLength<2||65496!==t.getUint16(0,T))return null;const{tableMarkers:e,sofMarkers:n}=function(){const t=new Set([65499,65476,65484,65501,65534]);for(let e=65504;e<65520;++e)t.add(e);const e=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:t,sofMarkers:e}}();let r=2;for(;r<t.byteLength;){const i=t.getUint16(r,T);if(n.has(i))return{height:t.getUint16(r+5,T),width:t.getUint16(r+7,T)};if(!e.has(i))return null;r+=2,r+=t.getUint16(r,T)}return null}}],["image/gif",{test:M,getSize:function(t){return{width:t.getUint16(6,U),height:t.getUint16(8,U)}}}],["image/bmp",{test:S,getSize:function(t){return{width:t.getUint32(18,U),height:t.getUint32(22,U)}}}]]);function L(t){return t.byteLength>=24&&2303741511===t.getUint32(0,T)}function M(t){return t.byteLength>=10&&1195984440===t.getUint32(0,T)}function S(t){return t.byteLength>=14&&16973===t.getUint16(0,T)&&t.getUint32(2,U)===t.byteLength}function E(t){return t.byteLength>=3&&65496===t.getUint16(0,T)&&255===t.getUint8(2,T)}const B=`Invalid MIME type. Supported MIME types are: ${Array.from(j.keys()).join(", ")}`;function k(t,e){if(e){const{test:n}=P(e);return n(A(t))}return Boolean(O(t))}function O(t){const e=A(t);for(const[t,{test:n}]of j.entries())if(n(e))return t;return null}function D(t,e=null){e=e||O(t);const{getSize:n}=P(e),r=n(A(t));if(!r)throw new Error(`invalid image data for type: ${e}`);return r}function P(t){const e=j.get(t);if(!e)throw new Error(B);return e}function A(t){if((t=t.buffer||t)instanceof ArrayBuffer)return new DataView(t);if(ArrayBuffer.isView(t))return new DataView(t.buffer);throw new Error("toDataView")}async function $(t,e,n){const o=((e=e||{}).image||{}).type||"auto",{url:a}=n||{};let u;switch(function(t){switch(t){case"auto":case"data":return f();default:return s(t),t}}(o)){case"imagebitmap":u=await I(t,e,a);break;case"image":u=await b(t,e,a);break;case"data":u=await function(t,e){const n=O(t),{_parseImageNode:o}=i.a;return r(o),o(t,n,e)}(t,e);break;default:r(!1)}return"data"===o&&(u=l(u)),u}var _={name:"Images",version:"2.1.2",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vndmicrosofticon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:$,test:t=>{const e=new DataView(t);return E(e)||S(e)||M(e)||L(e)},options:{image:{format:"auto",decode:!0}}};const{_encodeImageNode:z}=i.a;var N={name:"Images",extensions:["jpeg"],encode:function(t,e){if(z)return z(t,e);if(t instanceof HTMLCanvasElement){return t.toDataURL(e)}r(t instanceof Image,"getImageData accepts image or canvas");const n=document.createElement("canvas");n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(t,0,0);const i=n.toDataURL(e||"png").replace(/^data:image\/(png|jpg);base64,/,"");return Promise.resolve(i)},DEFAULT_OPTIONS:{type:"png"}};let R="";const V={};function C(t,e,n){let i=t;"function"==typeof t&&(i=t({...e,...n})),r("string"==typeof i);const{baseUrl:o}=e;return o&&(i="/"===o[o.length-1]?`${o}${i}`:`${o}/${i}`),function(t){for(const e in V)if(t.startsWith(e)){const n=V[e];return t.replace(e,n)}return t+=R}(i)}const F=t=>t&&"object"==typeof t;async function H(t,e,n){if(Array.isArray(t))return await async function(t,e,n={}){const r=t.map(t=>H(t,e,n));return await Promise.all(r)}(t,e,n);if(F(t))return await async function(t,e,n){const r=[],i={};for(const o in t){const a=H(t[o],e,n).then(t=>{i[o]=t});r.push(a)}return await Promise.all(r),i}(t,e,n);const r=t;return await e(r,n)}async function W(t,e,n){return await async function(t,e,n={}){return await H(t,e,n)}(t,t=>G(t,e,n))}async function G(t,e,n){const r=await fetch(t,n.fetch),i=await r.arrayBuffer();return await e(i,n)}async function q(t,e={}){const n=await J(t,e);return await W(n,$,e)}async function J(t,e,n={}){const i=e&&e.image&&e.image.mipLevels||0;return 0!==i?await async function(t,e,n,i){const o=[];if("auto"===e){const r=C(t,n,{...i,lod:0}),a=await G(r,$,n),{width:u,height:c}=l(a);e=function({width:t,height:e}){return 1+Math.floor(Math.log2(Math.max(t,e)))}({width:u,height:c}),o.push(r)}r(e>0);for(let r=o.length;r<e;++r){const e=C(t,n,{...i,lod:r});o.push(e)}return o}(t,i,e,n):C(t,e,n)}async function K(t,e,n={}){const r=await async function(t,e,n={}){const r=[];for(let i=0;i<t;i++){const t=J(e,n,{index:i});r.push(t)}return await Promise.all(r)}(t,e,n);return await W(r,$,n)}const Q=[{face:34069,direction:"right",axis:"x",sign:"positive"},{face:34070,direction:"left",axis:"x",sign:"negative"},{face:34071,direction:"top",axis:"y",sign:"positive"},{face:34072,direction:"bottom",axis:"y",sign:"negative"},{face:34073,direction:"front",axis:"z",sign:"positive"},{face:34074,direction:"back",axis:"z",sign:"negative"}];async function X(t,e={}){const n=await async function(t,e){const n={},r=[];let i=0;for(const o in Q){const a=J(t,e,{...Q[i],index:i++}).then(t=>{n[o]=t});r.push(a)}return await Promise.all(r),n}(t,e);return await W(n,$,e)}function Y(t=null){return f()}n.d(e,"getSupportedImageType",(function(){return Y})),n.d(e,"ImageLoader",(function(){return _})),n.d(e,"ImageWriter",(function(){return N})),n.d(e,"isImageTypeSupported",(function(){return s})),n.d(e,"getDefaultImageType",(function(){return f})),n.d(e,"isImage",(function(){return g})),n.d(e,"getImageType",(function(){return d})),n.d(e,"getImageSize",(function(){return l})),n.d(e,"getImageData",(function(){return l})),n.d(e,"isBinaryImage",(function(){return k})),n.d(e,"getBinaryImageMIMEType",(function(){return O})),n.d(e,"getBinaryImageSize",(function(){return D})),n.d(e,"loadImage",(function(){return q})),n.d(e,"loadImageArray",(function(){return K})),n.d(e,"loadImageCube",(function(){return X})),n.d(e,"HTMLImageLoader",(function(){return _}))}])}));