{"version":3,"sources":["../../../../src/tileset/traversers/i3s-tile-manager.js"],"names":["STATUS","REQUESTED","COMPLETED","ERROR","I3STileManager","_statusMap","request","key","callback","options","status","then","data","error"],"mappings":";;;;;;;;;;;;;AAAA,IAAMA,MAAM,GAAG;AACbC,EAAAA,SAAS,EAAE,WADE;AAEbC,EAAAA,SAAS,EAAE,WAFE;AAGbC,EAAAA,KAAK,EAAE;AAHM,CAAf;;IAOqBC,c;AACnB,4BAAc;AAAA;AACZ,SAAKC,UAAL,GAAkB,EAAlB;AACD;;;;wBAEGC,O,EAASC,G,EAAKC,Q,EAAUC,O,EAAS;AAAA;;AACnC,UAAI,CAAC,KAAKJ,UAAL,CAAgBE,GAAhB,CAAL,EAA2B;AACzB,aAAKF,UAAL,CAAgBE,GAAhB,IAAuB;AAACD,UAAAA,OAAO,EAAPA,OAAD;AAAUE,UAAAA,QAAQ,EAARA,QAAV;AAAoBD,UAAAA,GAAG,EAAHA,GAApB;AAAyBE,UAAAA,OAAO,EAAPA,OAAzB;AAAkCC,UAAAA,MAAM,EAAEV,MAAM,CAACC;AAAjD,SAAvB;AACAK,QAAAA,OAAO,GACJK,IADH,CACQ,UAAAC,IAAI,EAAI;AACZ,UAAA,KAAI,CAACP,UAAL,CAAgBE,GAAhB,EAAqBG,MAArB,GAA8BV,MAAM,CAACE,SAArC;;AACA,UAAA,KAAI,CAACG,UAAL,CAAgBE,GAAhB,EAAqBC,QAArB,CAA8BI,IAA9B,EAAoCH,OAApC;AACD,SAJH,WAKS,UAAAI,KAAK,EAAI;AACd,UAAA,KAAI,CAACR,UAAL,CAAgBE,GAAhB,EAAqBG,MAArB,GAA8BV,MAAM,CAACG,KAArC;AACAK,UAAAA,QAAQ,CAACK,KAAD,CAAR;AACD,SARH;AASD;AACF;;;2BAEMN,G,EAAKE,O,EAAS;AACnB,UAAI,KAAKJ,UAAL,CAAgBE,GAAhB,CAAJ,EAA0B;AACxB,aAAKF,UAAL,CAAgBE,GAAhB,EAAqBE,OAArB,GAA+BA,OAA/B;AACD;AACF;;;yBAEIF,G,EAAK;AACR,aAAO,KAAKF,UAAL,CAAgBE,GAAhB,CAAP;AACD","sourcesContent":["const STATUS = {\n  REQUESTED: 'REQUESTED',\n  COMPLETED: 'COMPLETED',\n  ERROR: 'ERROR'\n};\n\n// A helper class to manage tile metadata fetching\nexport default class I3STileManager {\n  constructor() {\n    this._statusMap = {};\n  }\n\n  add(request, key, callback, options) {\n    if (!this._statusMap[key]) {\n      this._statusMap[key] = {request, callback, key, options, status: STATUS.REQUESTED};\n      request()\n        .then(data => {\n          this._statusMap[key].status = STATUS.COMPLETED;\n          this._statusMap[key].callback(data, options);\n        })\n        .catch(error => {\n          this._statusMap[key].status = STATUS.ERROR;\n          callback(error);\n        });\n    }\n  }\n\n  update(key, options) {\n    if (this._statusMap[key]) {\n      this._statusMap[key].options = options;\n    }\n  }\n\n  find(key) {\n    return this._statusMap[key];\n  }\n}\n"],"file":"i3s-tile-manager.js"}