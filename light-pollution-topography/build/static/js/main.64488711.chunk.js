(this["webpackJsonplight-pollution-topography"]=this["webpackJsonplight-pollution-topography"]||[]).push([[0],{102:function(e,t){},140:function(e,t,a){e.exports=a(153)},145:function(e,t,a){},146:function(e,t,a){},147:function(e,t){},153:function(e,t,a){"use strict";a.r(t);var n=a(9),r=a.n(n),i=a(117),l=a.n(i),o=(a(145),a(99)),c=a.n(o),s=a(57),u=a(118),m=a(77),h=a(78),p=a(126),g=a(128),d=(a(146),a(169)),b=a(103),v=a(171),w=a(174),y={wrapLongitude:!0,renderSubLayers:function(e){return new w.a(e,{data:null,image:e.data,bounds:[e.tile.bbox.west,e.tile.bbox.south,e.tile.bbox.east,e.tile.bbox.north]})}},f={elevationDecoder:{rScaler:0,gScaler:0,bScaler:337,offset:0},meshMaxError:1,wrapLongitude:!0,workerUrl:"./terrain-loader.worker.js",material:{ambient:.2,diffuse:1,shininess:128,specularColor:[255,192,64]}},E=function(e){Object(g.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={viz:"bumpy-light",viewState:{longitude:-122.4,latitude:37.7,zoom:6,pitch:50,bearing:0,maxZoom:10},isDrone:!0,fullLoopDuration:200,pitchChange:.5,bearingChange:3,tickSize:5},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){return e.startAnimating()}),1e3)}},{key:"startAnimating",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t,a,n,r,i,l,o,u,m,h,p,g=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,a=t.viewState,n=a.pitch,r=a.bearing,i=t.fullLoopDuration,l=t.pitchChange,o=t.bearingChange,u=t.tickSize,"number"===typeof n&&"number"===typeof r){e.next=6;break}console.log({"deckgl appearance":"loading",pitch:n,bearing:r,pitchChange:l,time:Date.now()}),setTimeout((function(){return g.startAnimating()}),0),e.next=18;break;case 6:m=0;case 7:return e.next=9,new Promise((function(e){return requestAnimationFrame(e)}));case 9:return e.sent,e.next=12,new Promise((function(e){return setTimeout(e,u)}));case 12:e.sent,h=Math.sin(2*Math.PI*m/i),p=Math.sin(2*Math.PI*2*m/i),this.setState({viewState:Object(s.a)({},this.state.viewState,{bearing:r+h*o,pitch:n+p*l,transitionDuration:u,onTransitionInterrupt:function(){return g.setState({isDrone:!1})}})});case 16:if(m++<i&&this.state.isDrone){e.next=7;break}case 17:this.state.isDrone&&this.startAnimating();case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.viz,a=new b.a(Object(s.a)({},y,{data:"./tiles/greys-{z}-{x}-{y}.png",maxZoom:7,id:"smog"})),n=new b.a(Object(s.a)({},y,{data:"./stamen-tiles/watercolor/{z}/{x}/{y}.jpg",id:"watercolor"})),i=new b.a(Object(s.a)({},y,{data:"./stamen-tiles/toner-labels/{z}/{x}/{y}.png",id:"tonerlabel"})),l=new b.a(Object(s.a)({},y,{data:"./stamen-tiles/terrain/{z}/{x}/{y}.png",id:"greenhills"})),o={"bumpy-light":[new v.a(Object(s.a)({},f,{id:"bumpyLight",elevationData:"./tiles/globe-{z}-{x}-{y}.png",texture:"./tiles/globe-{z}-{x}-{y}.png",workerUrl:"./terrain-loader.worker.js"}))],"bumpy-terrain":[new v.a(Object(s.a)({},f,{id:"bumpyTerrain",elevationData:"./tiles/globe-{z}-{x}-{y}.png",texture:"./stamen-tiles/terrain/{z}/{x}/{y}.png"}))],"bumpy-watercolor":[new v.a(Object(s.a)({},f,{id:"bumpyWatercolor",elevationData:"./tiles/globe-{z}-{x}-{y}.png",texture:"./stamen-tiles/watercolor/{z}/{x}/{y}.jpg"}))],"hazy-terrain":[l,a],"hazy-watercolor":[n,i,a],"hazy-gouache":[n,a]}[t];return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(d.a,{viewState:this.state.viewState,controller:!0,layers:o,id:"maincanvas",onViewStateChange:function(t){var a=t.viewState;return e.setState({viewState:a})}})),r.a.createElement("div",{className:"tweaks"},r.a.createElement("div",{id:"colophon"},"\xa9 Lee Butterman 2020. Made in Oakland, California.",r.a.createElement("br",null),"Map tiles by Stamen Design, ",r.a.createElement("a",{href:"https://creativecommons.org/licenses/by/3.0/"},"CC BY 3.0"),".",r.a.createElement("br",null),"Map data by OpenStreetMap, ",r.a.createElement("a",{href:"https://creativecommons.org/licenses/by-sa/3.0/"},"CC BY SA 3.0"),r.a.createElement("br",null),"Light pollution from ",r.a.createElement("a",{href:"https://dx.doi.org/10.1126/sciadv.1600377"},"Falchi et al"),", ",r.a.createElement("a",{href:"https://doi.org/10.5880/GFZ.1.4.2016.001"},"World Atlas 2015"),", ",r.a.createElement("a",{href:"https://creativecommons.org/licenses/by-nc/4.0/"},"CC BY NC 4.0"),".",r.a.createElement("br",null),r.a.createElement("div",{id:"legend"},r.a.createElement("hr",null),"Light pollution legend (as haze):",r.a.createElement("br",null),r.a.createElement("span",{id:"no-human-light"},"no human light"),"/",r.a.createElement("span",{id:"horizon-glow"},"horizon glow"),"/",r.a.createElement("span",{id:"no-milky-way"},"no milky way"),"/",r.a.createElement("span",{id:"mesopic"},"colors visible"))),r.a.createElement("div",{id:"tweaks"},"View light pollution as:",r.a.createElement("br",null),r.a.createElement("form",null,r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"viz",value:"bumpy-light",checked:"bumpy-light"===t,onChange:function(t){return e.setState({viz:t.target.value})}}),"topography, on a white/blue world")),r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"viz",value:"bumpy-terrain",checked:"bumpy-terrain"===t,onChange:function(t){return e.setState({viz:t.target.value})}}),"topography, on a terrain map world")),r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"viz",value:"bumpy-watercolor",checked:"bumpy-watercolor"===t,onChange:function(t){return e.setState({viz:t.target.value})}}),"topography, on a watercolor world")),r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"viz",value:"hazy-terrain",checked:"hazy-terrain"===t,onChange:function(t){return e.setState({viz:t.target.value})}}),"haze, on a terrain map world")),r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"viz",value:"hazy-watercolor",checked:"hazy-watercolor"===t,onChange:function(t){return e.setState({viz:t.target.value})}}),"haze, on a watercolor world with labels")),r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"viz",value:"hazy-gouache",checked:"hazy-gouache"===t,onChange:function(t){return e.setState({viz:t.target.value})}}),"haze, on a watercolor world"))),r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",checked:this.state.isDrone,onChange:function(t){e.setState({isDrone:t.target.checked}),e.state.isDrone||e.startAnimating()}}),"drone hover"))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[140,1,2]]]);
//# sourceMappingURL=main.64488711.chunk.js.map