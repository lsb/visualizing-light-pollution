(this["webpackJsonplight-pollution-topography"]=this["webpackJsonplight-pollution-topography"]||[]).push([[0],{105:function(e,t){},145:function(e,t,a){e.exports=a(158)},150:function(e,t,a){},151:function(e,t,a){},152:function(e,t){},158:function(e,t,a){"use strict";a.r(t);var n=a(18),r=a.n(n),o=a(122),i=a.n(o),l=(a(150),a(61)),s=a(102),c=a.n(s),u=a(123),m=a(79),h=a(80),p=a(131),d=a(133),g=(a(151),a(174)),b=a(107),w=a(176),y=a(179),v=a(106),f=a(108),x={wrapLongitude:!0,renderSubLayers:function(e){return new y.a(e,{data:null,image:e.data,bounds:[e.tile.bbox.west,e.tile.bbox.south,e.tile.bbox.east,e.tile.bbox.north]})}},z={elevationDecoder:{rScaler:0,gScaler:0,bScaler:337,offset:0},meshMaxError:1,wrapLongitude:!0,workerUrl:"./terrain-loader.worker.js",material:{ambient:.2,diffuse:1,shininess:128,specularColor:[255,192,64]}},k=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={viz:"bumpy-light",viewState:{longitude:-122.4,latitude:37.7,zoom:6,pitch:0,bearing:0,maxZoom:10},isDrone:!0,fullLoopDuration:234,tickSize:10,d1x:0,d1y:5,d1z:-13,d2x:1,d2y:8,d2z:-2.5},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){return e.startAnimating()}),1e3)}},{key:"startAnimating",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t,a,n,r,o,i,l=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,a=t.fullLoopDuration,n=t.tickSize,"number"===typeof a&&"number"===typeof n){e.next=6;break}console.log({"deckgl appearance":"loading",fullLoopDuration:a,tickSize:n,time:Date.now()}),setTimeout((function(){return l.startAnimating()}),0),e.next=18;break;case 6:r=0;case 7:return e.next=9,new Promise((function(e){return requestAnimationFrame(e)}));case 9:return e.sent,e.next=12,new Promise((function(e){return setTimeout(e,n)}));case 12:e.sent,o=5*Math.sin(2*Math.PI*r/a),i=5*Math.cos(2*Math.PI*r/a),this.setState({d1x:o,d1y:i});case 16:if(r++<a&&this.state.isDrone){e.next=7;break}case 17:this.state.isDrone&&this.startAnimating();case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.viz,n=t.d1x,o=t.d1y,i=t.d1z,s=t.d2x,c=t.d2y,u=t.d2z,m=new b.a(Object(l.a)({},x,{data:"./tiles/greys-{z}-{x}-{y}.png",maxZoom:7,id:"smog"})),h=new b.a(Object(l.a)({},x,{data:"./stamen-tiles/watercolor/{z}/{x}/{y}.jpg",id:"watercolor"})),p=new b.a(Object(l.a)({},x,{data:"./stamen-tiles/toner-labels/{z}/{x}/{y}.png",id:"tonerlabel"})),d=new b.a(Object(l.a)({},x,{data:"./stamen-tiles/terrain/{z}/{x}/{y}.png",id:"greenhills"})),y={"bumpy-light":[new w.a(Object(l.a)({},z,{id:"bumpyLight",elevationData:"./tiles/globe-{z}-{x}-{y}.png",texture:"./tiles/globe-{z}-{x}-{y}.png",workerUrl:"./terrain-loader.worker.js"}))],"bumpy-terrain":[new w.a(Object(l.a)({},z,{id:"bumpyTerrain",elevationData:"./tiles/globe-{z}-{x}-{y}.png",texture:"./stamen-tiles/terrain/{z}/{x}/{y}.png"}))],"bumpy-watercolor":[new w.a(Object(l.a)({},z,{id:"bumpyWatercolor",elevationData:"./tiles/globe-{z}-{x}-{y}.png",texture:"./stamen-tiles/watercolor/{z}/{x}/{y}.jpg"}))],"hazy-terrain":[d,m],"hazy-watercolor":[h,p,m],"hazy-gouache":[h,m]}[a],k=[new v.a({color:[255,255,255],intensity:.25,_shadow:!0,direction:[n,o,i]}),new v.a({color:[255,255,255],intensity:.9,direction:[s,c,u]})],E=[new f.a({a:k[0],b:k[1]})];return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(g.a,{viewState:this.state.viewState,controller:!0,layers:y,effects:E,id:"maincanvas",onViewStateChange:function(t){var a=t.viewState;return e.setState({viewState:a})}})),r.a.createElement("div",{className:"tweaks"},r.a.createElement("div",{id:"colophon"},"\xa9 Lee Butterman 2020. Made in Oakland CA.",r.a.createElement("span",{className:"tiny-credits"},"Map tiles ",r.a.createElement("a",{href:"https://creativecommons.org/licenses/by/3.0/"},"by")," Stamen Design. Map data ",r.a.createElement("a",{href:"https://creativecommons.org/licenses/by-sa/3.0/"},"by")," OpenStreetMap. Light pollution ",r.a.createElement("a",{href:"https://creativecommons.org/licenses/by-nc/4.0/"},"by")," ",r.a.createElement("a",{href:"https://dx.doi.org/10.1126/sciadv.1600377"},"Falchi et al"),", ",r.a.createElement("a",{href:"https://doi.org/10.5880/GFZ.1.4.2016.001"},"World Atlas 2015"),".")),r.a.createElement("div",{id:"tweaks"},"View light pollution as:",r.a.createElement("select",{id:"viz-style",onChange:function(t){return e.setState({viz:t.target.value})},value:a},r.a.createElement("option",{value:"bumpy-light"},"topography, on a white/blue world"),r.a.createElement("option",{value:"bumpy-terrain"},"topography, on a terrain map world"),r.a.createElement("option",{value:"bumpy-watercolor"},"topography, on a watercolor world"),r.a.createElement("option",{value:"hazy-terrain"},"haze, on a terrain map world"),r.a.createElement("option",{value:"hazy-watercolor"},"haze, on a watercolor world with labels"),r.a.createElement("option",{value:"hazy-gouache"},"haze, on a watercolor world")),"\xa0 \xa0",r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",checked:this.state.isDrone,onChange:function(t){e.setState({isDrone:t.target.checked}),e.state.isDrone||e.startAnimating()}}),"spotlight circling\xa0"))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[145,1,2]]]);
//# sourceMappingURL=main.9c962ec4.chunk.js.map